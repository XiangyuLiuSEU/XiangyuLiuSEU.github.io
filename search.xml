<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’]]></title>
    <url>%2F2019%2F04%2F04%2Fwhat-is-dynamic-programming%2F</url>
    <content type="text"><![CDATA[ä½œè€…ï¼šé˜®è¡Œæ­¢ é“¾æ¥ï¼šhttps://www.zhihu.com/question/23995189/answer/613096905 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ 0. intro å¾ˆæœ‰æ„æ€çš„é—®é¢˜ã€‚ä»¥å¾€è§è¿‡è®¸å¤šæ•™æï¼Œå¯¹åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰çš„å¼•å…¥å±äºâ€œå¥‰å¤©æ‰¿è¿ï¼Œçš‡å¸è¯æ›°â€å¼ï¼šä¸ç»™å‡ºä¸€ç‚¹å¼•å…¥ï¼Œè§é¢å³æ‹¿å‡ºä¸€å¤§å †å…¬å¼å“äººï¼›å­¦ç”Ÿåˆ™æ­»å•ƒä¹¦æœ¬ï¼Œç„¶åçªç„¶é¡¿æ‚Ÿã€‚é’ˆå¯¹å…¥é—¨è€…çš„æ•™æä¸åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚æ°å¥½æˆ‘ç»™å…¥é—¨è€…è®²è¿‡å››æ¬¡DPå…¥é—¨ï¼Œè¿­ä»£å‡ºäº†ä¸€å¥—æ¯”è¾ƒé è°±çš„æ•™å­¦æ–¹æ³•ï¼Œæ‰€ä»¥ä»Šå¤©è·‘è¿‡æ¥çŒ®ä¸‘ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬è¯•ç€è‡ªå·±æ¥ä¸€æ­¥æ­¥â€œé‡æ–°å‘æ˜â€DPã€‚ 1. ä»ä¸€ä¸ªç”Ÿæ´»é—®é¢˜è°ˆèµ· å…ˆæ¥çœ‹çœ‹ç”Ÿæ´»ä¸­ç»å¸¸é‡åˆ°çš„äº‹å§â€”â€”å‡è®¾æ‚¨æ˜¯ä¸ªåœŸè±ªï¼Œèº«ä¸Šå¸¦äº†è¶³å¤Ÿçš„1ã€5ã€10ã€20ã€50ã€100å…ƒé¢å€¼çš„é’ç¥¨ã€‚ç°åœ¨æ‚¨çš„ç›®æ ‡æ˜¯å‡‘å‡ºæŸä¸ªé‡‘é¢wï¼Œéœ€è¦ç”¨åˆ°å°½é‡å°‘çš„é’ç¥¨ã€‚ ä¾æ®ç”Ÿæ´»ç»éªŒï¼Œæˆ‘ä»¬æ˜¾ç„¶å¯ä»¥é‡‡å–è¿™æ ·çš„ç­–ç•¥ï¼šèƒ½ç”¨100çš„å°±å°½é‡ç”¨100çš„ï¼Œå¦åˆ™å°½é‡ç”¨50çš„â€¦â€¦ä¾æ¬¡ç±»æ¨ã€‚åœ¨è¿™ç§ç­–ç•¥ä¸‹ï¼Œ666=6Ã—100+1Ã—50+1Ã—10+1Ã—5+1Ã—1ï¼Œå…±ä½¿ç”¨äº†10å¼ é’ç¥¨ã€‚ è¿™ç§ç­–ç•¥ç§°ä¸ºâ€œè´ªå¿ƒâ€ï¼šå‡è®¾æˆ‘ä»¬é¢å¯¹çš„å±€é¢æ˜¯â€œéœ€è¦å‡‘å‡ºwâ€ï¼Œè´ªå¿ƒç­–ç•¥ä¼šå°½å¿«è®©wå˜å¾—æ›´å°ã€‚èƒ½è®©wå°‘100å°±å°½é‡è®©å®ƒå°‘100ï¼Œè¿™æ ·æˆ‘ä»¬æ¥ä¸‹æ¥é¢å¯¹çš„å±€é¢å°±æ˜¯å‡‘å‡ºw-100ã€‚é•¿æœŸçš„ç”Ÿæ´»ç»éªŒè¡¨æ˜ï¼Œè´ªå¿ƒç­–ç•¥æ˜¯æ­£ç¡®çš„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ¢ä¸€ç»„é’ç¥¨çš„é¢å€¼ï¼Œè´ªå¿ƒç­–ç•¥å°±ä¹Ÿè®¸ä¸æˆç«‹äº†ã€‚å¦‚æœä¸€ä¸ªå¥‡è‘©å›½å®¶çš„é’ç¥¨é¢é¢åˆ†åˆ«æ˜¯1ã€5ã€11ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å‡‘å‡º15çš„æ—¶å€™ï¼Œè´ªå¿ƒç­–ç•¥ä¼šå‡ºé”™ï¼š 15=1Ã—11+4Ã—1 ï¼ˆè´ªå¿ƒç­–ç•¥ä½¿ç”¨äº†5å¼ é’ç¥¨ï¼‰ 15=3Ã—5 ï¼ˆæ­£ç¡®çš„ç­–ç•¥ï¼Œåªç”¨3å¼ é’ç¥¨ï¼‰ ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿè´ªå¿ƒç­–ç•¥é”™åœ¨äº†å“ªé‡Œï¼Ÿ é¼ ç›®å¯¸å…‰ã€‚ åˆšåˆšå·²ç»è¯´è¿‡ï¼Œè´ªå¿ƒç­–ç•¥çš„çº²é¢†æ˜¯ï¼šâ€œå°½é‡ä½¿æ¥ä¸‹æ¥é¢å¯¹çš„wæ›´å°â€ã€‚è¿™æ ·ï¼Œè´ªå¿ƒç­–ç•¥åœ¨w=15çš„å±€é¢æ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨11æ¥æŠŠwé™åˆ°4ï¼›ä½†æ˜¯åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œå‡‘å‡º4çš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œå¿…é¡»ä½¿ç”¨4Ã—1ã€‚å¦‚æœä½¿ç”¨äº†5ï¼Œwä¼šé™ä¸º10ï¼Œè™½ç„¶æ²¡æœ‰4é‚£ä¹ˆå°ï¼Œä½†æ˜¯å‡‘å‡º10åªéœ€è¦ä¸¤å¼ 5å…ƒã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°ï¼Œè´ªå¿ƒæ˜¯ä¸€ç§åªè€ƒè™‘çœ¼å‰æƒ…å†µçš„ç­–ç•¥ã€‚ é‚£ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬æ€æ ·æ‰èƒ½é¿å…é¼ ç›®å¯¸å…‰å‘¢ï¼Ÿ å¦‚æœç›´æ¥æš´åŠ›æšä¸¾å‡‘å‡ºwçš„æ–¹æ¡ˆï¼Œæ˜æ˜¾å¤æ‚åº¦è¿‡é«˜ã€‚å¤ªå¤šç§æ–¹æ³•å¯ä»¥å‡‘å‡ºwäº†ï¼Œæšä¸¾å®ƒä»¬çš„æ—¶é—´æ˜¯ä¸å¯æ‰¿å—çš„ã€‚æˆ‘ä»¬ç°åœ¨æ¥å°è¯•æ‰¾ä¸€ä¸‹æ€§è´¨ã€‚ é‡æ–°åˆ†æåˆšåˆšçš„ä¾‹å­ã€‚w=15æ—¶ï¼Œæˆ‘ä»¬å¦‚æœå–11ï¼Œæ¥ä¸‹æ¥å°±é¢å¯¹w=4çš„æƒ…å†µï¼›å¦‚æœå–5ï¼Œåˆ™æ¥ä¸‹æ¥é¢å¯¹w=10çš„æƒ…å†µã€‚æˆ‘ä»¬å‘ç°è¿™äº›é—®é¢˜éƒ½æœ‰ç›¸åŒçš„å½¢å¼ï¼šâ€œç»™å®šwï¼Œå‡‘å‡ºwæ‰€ç”¨çš„æœ€å°‘é’ç¥¨æ˜¯å¤šå°‘å¼ ï¼Ÿâ€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨f(n)æ¥è¡¨ç¤ºâ€œå‡‘å‡ºnæ‰€éœ€çš„æœ€å°‘é’ç¥¨æ•°é‡â€ã€‚ é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬å–äº†11ï¼Œæœ€åçš„ä»£ä»·ï¼ˆç”¨æ‰çš„é’ç¥¨æ€»æ•°ï¼‰æ˜¯å¤šå°‘å‘¢ï¼Ÿ æ˜æ˜¾ ï¼Œå®ƒçš„æ„ä¹‰æ˜¯ï¼šåˆ©ç”¨11æ¥å‡‘å‡º15ï¼Œä»˜å‡ºçš„ä»£ä»·ç­‰äºf(4)åŠ ä¸Šè‡ªå·±è¿™ä¸€å¼ é’ç¥¨ã€‚ç°åœ¨æˆ‘ä»¬æš‚æ—¶ä¸ç®¡f(4)æ€ä¹ˆæ±‚å‡ºæ¥ã€‚ ä¾æ¬¡ç±»æ¨ï¼Œé©¬ä¸Šå¯ä»¥çŸ¥é“ï¼šå¦‚æœæˆ‘ä»¬ç”¨5æ¥å‡‘å‡º15ï¼Œcostå°±æ˜¯ ã€‚ é‚£ä¹ˆï¼Œç°åœ¨w=15çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯¥å–é‚£ç§é’ç¥¨å‘¢ï¼Ÿå½“ç„¶æ˜¯å„ç§æ–¹æ¡ˆä¸­ï¼Œcostå€¼æœ€ä½çš„é‚£ä¸€ä¸ªï¼ å–11ï¼š å–5ï¼š å–1ï¼š æ˜¾è€Œæ˜“è§ï¼Œcostå€¼æœ€ä½çš„æ˜¯å–5çš„æ–¹æ¡ˆã€‚æˆ‘ä»¬é€šè¿‡ä¸Šé¢ä¸‰ä¸ªå¼å­ï¼Œåšå‡ºäº†æ­£ç¡®çš„å†³ç­–ï¼ è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªè‡³å…³é‡è¦çš„å¯ç¤ºâ€”â€” åªä¸ ç›¸å…³ï¼›æ›´ç¡®åˆ‡åœ°è¯´ï¼š è¿™ä¸ªå¼å­æ˜¯éå¸¸æ¿€åŠ¨äººå¿ƒçš„ã€‚æˆ‘ä»¬è¦æ±‚å‡ºf(n)ï¼Œåªéœ€è¦æ±‚å‡ºå‡ ä¸ªæ›´å°çš„få€¼ï¼›æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»å°åˆ°å¤§æŠŠæ‰€æœ‰çš„f(i)æ±‚å‡ºæ¥ä¸å°±å¥½äº†ï¼Ÿæ³¨æ„ä¸€ä¸‹è¾¹ç•Œæƒ…å†µå³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š æˆ‘ä»¬ä»¥ çš„å¤æ‚åº¦è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ç°åœ¨å›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å®ƒçš„åŸç†ï¼š åªä¸çš„å€¼ç›¸å…³ã€‚ æˆ‘ä»¬åªå…³å¿ƒ çš„å€¼ï¼Œä¸å…³å¿ƒæ˜¯æ€ä¹ˆå‡‘å‡ºwçš„ã€‚ è¿™ä¸¤ä¸ªäº‹å®ï¼Œä¿è¯äº†æˆ‘ä»¬åšæ³•çš„æ­£ç¡®æ€§ã€‚å®ƒæ¯”èµ·è´ªå¿ƒç­–ç•¥ï¼Œä¼šåˆ†åˆ«ç®—å‡ºå–1ã€5ã€11çš„ä»£ä»·ï¼Œä»è€Œåšå‡ºä¸€ä¸ªæ­£ç¡®å†³ç­–ï¼Œè¿™æ ·å°±é¿å…æ‰äº†â€œé¼ ç›®å¯¸å…‰â€ï¼ å®ƒä¸æš´åŠ›çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿæˆ‘ä»¬çš„æš´åŠ›æšä¸¾äº†â€œä½¿ç”¨çš„ç¡¬å¸â€ï¼Œç„¶è€Œè¿™å±äºå†—ä½™ä¿¡æ¯ã€‚æˆ‘ä»¬è¦çš„æ˜¯ç­”æ¡ˆï¼Œæ ¹æœ¬ä¸å…³å¿ƒè¿™ä¸ªç­”æ¡ˆæ˜¯æ€ä¹ˆå‡‘å‡ºæ¥çš„ã€‚è­¬å¦‚ï¼Œè¦æ±‚å‡ºf(15)ï¼Œåªéœ€è¦çŸ¥é“f(14),f(10),f(4)çš„å€¼ã€‚**å…¶ä»–ä¿¡æ¯å¹¶ä¸éœ€è¦ã€‚**æˆ‘ä»¬èˆå¼ƒäº†å†—ä½™ä¿¡æ¯ã€‚æˆ‘ä»¬åªè®°å½•äº†å¯¹è§£å†³é—®é¢˜æœ‰å¸®åŠ©çš„ä¿¡æ¯â€”â€”f(n). æˆ‘ä»¬èƒ½è¿™æ ·å¹²ï¼Œå–å†³äºé—®é¢˜çš„æ€§è´¨ï¼šæ±‚å‡ºf(n)ï¼Œåªéœ€è¦çŸ¥é“å‡ ä¸ªæ›´å°çš„fÂ©ã€‚æˆ‘ä»¬å°†æ±‚è§£fÂ©ç§°ä½œæ±‚è§£f(n)çš„â€œå­é—®é¢˜â€ã€‚ è¿™å°±æ˜¯DPï¼ˆåŠ¨æ€è§„åˆ’ï¼Œdynamic programmingï¼‰. å°†ä¸€ä¸ªé—®é¢˜æ‹†æˆå‡ ä¸ªå­é—®é¢˜ï¼Œåˆ†åˆ«æ±‚è§£è¿™äº›å­é—®é¢˜ï¼Œå³å¯æ¨æ–­å‡ºå¤§é—®é¢˜çš„è§£ã€‚ æ€è€ƒé¢˜ï¼šè¯·ç¨å¾®ä¿®æ”¹ä»£ç ï¼Œè¾“å‡ºæˆ‘ä»¬å‡‘å‡ºwçš„æ–¹æ¡ˆ 2. å‡ ä¸ªç®€å•çš„æ¦‚å¿µ ã€æ— åæ•ˆæ€§ã€‘ ä¸€æ—¦f(n)ç¡®å®šï¼Œâ€œæˆ‘ä»¬å¦‚ä½•å‡‘å‡ºf(n)â€å°±å†ä¹Ÿç”¨ä¸ç€äº†ã€‚ è¦æ±‚å‡ºf(15)ï¼Œåªéœ€è¦çŸ¥é“f(14),f(10),f(4)çš„å€¼ï¼Œè€Œf(14),f(10),f(4)æ˜¯å¦‚ä½•ç®—å‡ºæ¥çš„ï¼Œå¯¹ä¹‹åçš„é—®é¢˜æ²¡æœ‰å½±å“ã€‚ â€œæœªæ¥ä¸è¿‡å»æ— å…³â€ï¼Œè¿™å°±æ˜¯æ— åæ•ˆæ€§ã€‚ ï¼ˆä¸¥æ ¼å®šä¹‰ï¼šå¦‚æœç»™å®šæŸä¸€é˜¶æ®µçš„çŠ¶æ€ï¼Œåˆ™åœ¨è¿™ä¸€é˜¶æ®µä»¥åè¿‡ç¨‹çš„å‘å±•ä¸å—è¿™é˜¶æ®µä»¥å‰å„æ®µçŠ¶æ€çš„å½±å“ã€‚ï¼‰ ã€æœ€ä¼˜å­ç»“æ„ã€‘ å›é¡¾æˆ‘ä»¬å¯¹f(n)çš„å®šä¹‰ï¼šæˆ‘ä»¬è®°â€œå‡‘å‡ºnæ‰€éœ€çš„æœ€å°‘é’ç¥¨æ•°é‡â€ä¸ºf(n). f(n)çš„å®šä¹‰å°±å·²ç»è•´å«äº†â€œæœ€ä¼˜â€ã€‚åˆ©ç”¨w=14,10,4çš„æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬å³å¯ç®—å‡ºw=15çš„æœ€ä¼˜è§£ã€‚ å¤§é—®é¢˜çš„æœ€ä¼˜è§£å¯ä»¥ç”±å°é—®é¢˜çš„æœ€ä¼˜è§£æ¨å‡ºï¼Œè¿™ä¸ªæ€§è´¨å«åšâ€œæœ€ä¼˜å­ç»“æ„æ€§è´¨â€ã€‚ å¼•å…¥è¿™ä¸¤ä¸ªæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé—®é¢˜èƒ½å¦ä½¿ç”¨DPè§£å†³å‘¢ï¼Ÿ èƒ½å°†å¤§é—®é¢˜æ‹†æˆå‡ ä¸ªå°é—®é¢˜ï¼Œä¸”æ»¡è¶³æ— åæ•ˆæ€§ã€æœ€ä¼˜å­ç»“æ„æ€§è´¨ã€‚ 3. DPçš„å…¸å‹åº”ç”¨ï¼šDAGæœ€çŸ­è·¯ é—®é¢˜å¾ˆç®€å•ï¼šç»™å®šä¸€ä¸ªåŸå¸‚çš„åœ°å›¾ï¼Œæ‰€æœ‰çš„é“è·¯éƒ½æ˜¯å•è¡Œé“ï¼Œè€Œä¸”ä¸ä¼šæ„æˆç¯ã€‚æ¯æ¡é“è·¯éƒ½æœ‰è¿‡è·¯è´¹ï¼Œé—®æ‚¨ä»Sç‚¹åˆ°Tç‚¹èŠ±è´¹çš„æœ€å°‘è´¹ç”¨ã€‚ â€‹ è¿™ä¸ªé—®é¢˜èƒ½ç”¨DPè§£å†³å—ï¼Ÿæˆ‘ä»¬å…ˆè¯•ç€è®°ä»Såˆ°Pçš„æœ€å°‘è´¹ç”¨ä¸ºfÂ§. æƒ³è¦åˆ°Tï¼Œè¦ä¹ˆç»è¿‡Cï¼Œè¦ä¹ˆç»è¿‡Dã€‚ä»è€Œ. å¥½åƒçœ‹èµ·æ¥å¯ä»¥DPã€‚ç°åœ¨æˆ‘ä»¬æ£€éªŒåˆšåˆšé‚£ä¸¤ä¸ªæ€§è´¨ï¼š - æ— åæ•ˆæ€§ï¼šå¯¹äºç‚¹Pï¼Œä¸€æ—¦fÂ§ç¡®å®šï¼Œä»¥åå°±åªå…³å¿ƒfÂ§çš„å€¼ï¼Œä¸å…³å¿ƒæ€ä¹ˆå»çš„ã€‚ - æœ€ä¼˜å­ç»“æ„ï¼šå¯¹äºPï¼Œæˆ‘ä»¬å½“ç„¶åªå…³å¿ƒåˆ°Pçš„æœ€å°è´¹ç”¨ï¼Œå³fÂ§ã€‚å¦‚æœæˆ‘ä»¬ä»Sèµ°åˆ°Tæ˜¯ ï¼Œé‚£è‚¯å®šSèµ°åˆ°Qçš„æœ€ä¼˜è·¯å¾„æ˜¯ ã€‚å¯¹ä¸€æ¡æœ€ä¼˜çš„è·¯å¾„è€Œè¨€ï¼Œä»Sèµ°åˆ°**æ²¿é€”ä¸Šæ‰€æœ‰çš„ç‚¹ï¼ˆå­é—®é¢˜ï¼‰**çš„æœ€ä¼˜è·¯å¾„ï¼Œéƒ½æ˜¯è¿™æ¡å¤§è·¯çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªé—®é¢˜çš„æœ€ä¼˜å­ç»“æ„æ€§è´¨æ˜¯æ˜¾ç„¶çš„ã€‚ æ—¢ç„¶è¿™ä¸¤ä¸ªæ€§è´¨éƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆæœ¬é¢˜å¯ä»¥DPã€‚å¼å­æ˜æ˜¾ä¸ºï¼š å…¶ä¸­Rä¸ºæœ‰è·¯é€šåˆ°Pçš„æ‰€æœ‰çš„ç‚¹ï¼Œ ä¸ºRåˆ°Pçš„è¿‡è·¯è´¹ã€‚ ä»£ç å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œæ‹“æ‰‘æ’åºå³å¯ã€‚ 4. å¯¹DPåŸç†çš„ä¸€ç‚¹è®¨è®º ã€DPçš„æ ¸å¿ƒæ€æƒ³ã€‘ DPä¸ºä»€ä¹ˆä¼šå¿«ï¼Ÿ æ— è®ºæ˜¯DPè¿˜æ˜¯æš´åŠ›ï¼Œæˆ‘ä»¬çš„ç®—æ³•éƒ½æ˜¯åœ¨å¯èƒ½è§£ç©ºé—´å†…ï¼Œå¯»æ‰¾æœ€ä¼˜è§£ã€‚ æ¥çœ‹é’ç¥¨é—®é¢˜ã€‚æš´åŠ›åšæ³•æ˜¯æšä¸¾æ‰€æœ‰çš„å¯èƒ½è§£ï¼Œè¿™æ˜¯æœ€å¤§çš„å¯èƒ½è§£ç©ºé—´ã€‚ DPæ˜¯æšä¸¾æœ‰å¸Œæœ›æˆä¸ºç­”æ¡ˆçš„è§£ã€‚è¿™ä¸ªç©ºé—´æ¯”æš´åŠ›çš„å°å¾—å¤šã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼šDPè‡ªå¸¦å‰ªæã€‚ DPèˆå¼ƒäº†ä¸€å¤§å †ä¸å¯èƒ½æˆä¸ºæœ€ä¼˜è§£çš„ç­”æ¡ˆã€‚è­¬å¦‚ï¼š 15 = 5+5+5 è¢«è€ƒè™‘äº†ã€‚ 15 = 5+5+1+1+1+1+1 ä»æ¥æ²¡æœ‰è€ƒè™‘è¿‡ï¼Œå› ä¸ºè¿™ä¸å¯èƒ½æˆä¸ºæœ€ä¼˜è§£ã€‚ ä»è€Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°DPçš„æ ¸å¿ƒæ€æƒ³ï¼šå°½é‡ç¼©å°å¯èƒ½è§£ç©ºé—´ã€‚ åœ¨æš´åŠ›ç®—æ³•ä¸­ï¼Œå¯èƒ½è§£ç©ºé—´å¾€å¾€æ˜¯æŒ‡æ•°çº§çš„å¤§å°ï¼›å¦‚æœæˆ‘ä»¬é‡‡ç”¨DPï¼Œé‚£ä¹ˆæœ‰å¯èƒ½æŠŠè§£ç©ºé—´çš„å¤§å°é™åˆ°å¤šé¡¹å¼çº§ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè§£ç©ºé—´è¶Šå°ï¼Œå¯»æ‰¾è§£å°±è¶Šå¿«ã€‚è¿™æ ·å°±å®Œæˆäº†ä¼˜åŒ–ã€‚ ã€DPçš„æ“ä½œè¿‡ç¨‹ã€‘ ä¸€è¨€ä»¥è”½ä¹‹ï¼šå¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†ã€‚ å°†ä¸€ä¸ªå¤§é—®é¢˜è½¬åŒ–æˆå‡ ä¸ªå°é—®é¢˜ï¼› æ±‚è§£å°é—®é¢˜ï¼› æ¨å‡ºå¤§é—®é¢˜çš„è§£ã€‚ ã€å¦‚ä½•è®¾è®¡DPç®—æ³•ã€‘ ä¸‹é¢ä»‹ç»æ¯”è¾ƒé€šç”¨çš„è®¾è®¡DPç®—æ³•çš„æ­¥éª¤ã€‚ é¦–å…ˆï¼ŒæŠŠæˆ‘ä»¬é¢å¯¹çš„å±€é¢è¡¨ç¤ºä¸ºxã€‚è¿™ä¸€æ­¥ç§°ä¸ºè®¾è®¡çŠ¶æ€ã€‚ å¯¹äºçŠ¶æ€xï¼Œè®°æˆ‘ä»¬è¦æ±‚å‡ºçš„ç­”æ¡ˆ(e.g. æœ€å°è´¹ç”¨)ä¸ºf(x).æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ±‚å‡ºf(T). æ‰¾å‡ºf(x)ä¸å“ªäº›å±€é¢æœ‰å…³ï¼ˆè®°ä¸ºpï¼‰ï¼Œå†™å‡ºä¸€ä¸ªå¼å­ï¼ˆç§°ä¸ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼‰ï¼Œé€šè¿‡fÂ§æ¥æ¨å‡ºf(x). ã€DPä¸‰è¿ã€‘ è®¾è®¡DPç®—æ³•ï¼Œå¾€å¾€å¯ä»¥éµå¾ªDPä¸‰è¿ï¼š æˆ‘æ˜¯è°ï¼Ÿ â€”â€”è®¾è®¡çŠ¶æ€ï¼Œè¡¨ç¤ºå±€é¢ æˆ‘ä»å“ªé‡Œæ¥ï¼Ÿ æˆ‘è¦åˆ°å“ªé‡Œå»ï¼Ÿ â€”â€”è®¾è®¡è½¬ç§» è®¾è®¡çŠ¶æ€æ˜¯DPçš„åŸºç¡€ã€‚æ¥ä¸‹æ¥çš„è®¾è®¡è½¬ç§»ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯è€ƒè™‘æˆ‘ä»å“ªé‡Œæ¥ï¼ˆæœ¬æ–‡ä¹‹å‰æåˆ°çš„ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½æ˜¯åœ¨è€ƒè™‘â€œæˆ‘ä»å“ªé‡Œæ¥â€ï¼‰ï¼›å¦ä¸€ç§æ˜¯è€ƒè™‘æˆ‘åˆ°å“ªé‡Œå»ï¼Œè¿™å¸¸è§äºæ±‚å‡ºf(x)ä¹‹åï¼Œæ›´æ–°èƒ½ä»xèµ°åˆ°çš„ä¸€äº›è§£ã€‚è¿™ç§DPä¹Ÿæ˜¯ä¸å°‘çš„ï¼Œæˆ‘ä»¬ä»¥åä¼šé‡åˆ°ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œâ€œæˆ‘ä»å“ªé‡Œæ¥â€å’Œâ€œæˆ‘è¦åˆ°å“ªé‡Œå»â€åªéœ€è¦è€ƒè™‘æ¸…æ¥šå…¶ä¸­ä¸€ä¸ªï¼Œå°±èƒ½è®¾è®¡å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œä»è€Œå†™ä»£ç æ±‚è§£é—®é¢˜ã€‚å‰è€…åˆç§°pullå‹çš„è½¬ç§»ï¼Œåè€…åˆç§°pushå‹çš„è½¬ç§»ã€‚ï¼ˆè¿™ä¸¤ä¸ªè¯æ˜¯ @é˜®æ­¢é›¨å¦¹å¦¹å‘Šè¯‰æˆ‘çš„ï¼Œä¸çŸ¥é“æºå‡ºå¤„åœ¨å“ªï¼‰ æ€è€ƒé¢˜ï¼šå¦‚ä½•æŠŠé’ç¥¨é—®é¢˜çš„ä»£ç æ”¹å†™æˆâ€œæˆ‘åˆ°å“ªé‡Œå»â€çš„å½¢å¼ï¼Ÿ æç¤ºï¼šæ±‚å‡ºf(x)ä¹‹åï¼Œæ›´æ–°f(x+1),f(x+5),f(x+11). 5. ä¾‹é¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ— æ‰¯äº†è¿™ä¹ˆå¤šå½¢è€Œä¸Šçš„å†…å®¹ï¼Œè¿˜æ˜¯åšä¸€é“ä¾‹é¢˜å§ã€‚ æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰é—®é¢˜ï¼šç»™å®šé•¿åº¦ä¸ºnçš„åºåˆ—aï¼Œä»aä¸­æŠ½å–å‡ºä¸€ä¸ªå­åºåˆ—ï¼Œè¿™ä¸ªå­åºåˆ—éœ€è¦å•è°ƒé€’å¢ã€‚é—®æœ€é•¿çš„ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰çš„é•¿åº¦ã€‚ e.g. 1,5,3,4,6,9,7,8çš„LISä¸º1,3,4,6,7,8ï¼Œé•¿åº¦ä¸º6ã€‚ å¦‚ä½•è®¾è®¡çŠ¶æ€ï¼ˆæˆ‘æ˜¯è°ï¼‰ï¼Ÿ æˆ‘ä»¬è®° ä¸ºä»¥ ç»“å°¾çš„LISé•¿åº¦ï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ . çŠ¶æ€xä»å“ªé‡Œæ¨è¿‡æ¥ï¼ˆæˆ‘ä»å“ªé‡Œæ¥ï¼‰ï¼Ÿ è€ƒè™‘æ¯”xå°çš„æ¯ä¸€ä¸ªpï¼šå¦‚æœ ï¼Œé‚£ä¹ˆf(x)å¯ä»¥å–fÂ§+1. è§£é‡Šï¼šæˆ‘ä»¬æŠŠ æ¥åœ¨ çš„åé¢ï¼Œè‚¯å®šèƒ½æ„é€ ä¸€ä¸ªä»¥ ç»“å°¾çš„ä¸Šå‡å­åºåˆ—ï¼Œé•¿åº¦æ¯”ä»¥ ç»“å°¾çš„LISå¤§1.é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹äº†ï¼š è‡³æ­¤è§£å†³é—®é¢˜ã€‚ä¸¤å±‚forå¾ªç¯ï¼Œå¤æ‚åº¦ . ä»è¿™ä¸‰ä¸ªä¾‹é¢˜ä¸­å¯ä»¥çœ‹å‡ºï¼ŒDPæ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ç§â€œå¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†â€çš„æ€æƒ³ã€‚å¸¦ç€è¿™ç§æ€æƒ³ï¼ŒDPå°†ä¼šæˆä¸ºæˆ‘ä»¬è§£å†³é—®é¢˜çš„åˆ©å™¨ã€‚ æœ€åï¼Œæˆ‘ä»¬ä¸€èµ·å¿µä¸€éDPä¸‰è¿å§â€”â€”æˆ‘æ˜¯è°ï¼Ÿæˆ‘ä»å“ªé‡Œæ¥ï¼Ÿæˆ‘è¦åˆ°å“ªé‡Œå»ï¼Ÿ 6. ä¹ é¢˜ å¦‚æœè¯»è€…æœ‰å…´è¶£ï¼Œå¯ä»¥è¯•ç€å®Œæˆä¸‹é¢å‡ ä¸ªä¹ é¢˜ï¼š ä¸€ã€è¯·é‡‡å–ä¸€äº›ä¼˜åŒ–æ‰‹æ®µï¼Œä»¥ çš„å¤æ‚åº¦è§£å†³LISé—®é¢˜ã€‚ æç¤ºï¼šå¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ Junior Dynamic Programmingâ€“åŠ¨æ€è§„åˆ’åˆæ­¥Â·å„ç§å­åºåˆ—é—®é¢˜ äºŒã€â€œæŒ‰é¡ºåºé€’æ¨â€å’Œâ€œè®°å¿†åŒ–æœç´¢â€æ˜¯å®ç°DPçš„ä¸¤ç§æ–¹å¼ã€‚è¯·æŸ¥é˜…èµ„æ–™ï¼Œç®€å•æè¿°â€œè®°å¿†åŒ–æœç´¢â€æ˜¯ä»€ä¹ˆã€‚å¹¶é‡‡ç”¨è®°å¿†åŒ–æœç´¢å†™å‡ºé’ç¥¨é—®é¢˜çš„ä»£ç ï¼Œç„¶åå®ŒæˆP1541 ä¹Œé¾Ÿæ£‹ - æ´›è°· ã€‚ ä¸‰ã€01èƒŒåŒ…é—®é¢˜æ˜¯ä¸€ç§å¸¸è§çš„DPæ¨¡å‹ã€‚è¯·å®ŒæˆP1048 é‡‡è¯ - æ´›è°·ã€‚ ä½œè€…ï¼šç‹å‹ é“¾æ¥ï¼šhttps://www.zhihu.com/question/23995189/answer/35429905 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ åŠ¨æ€è§„åˆ’çš„æœ¬è´¨ä¸åœ¨äºæ˜¯é€’æ¨æˆ–æ˜¯é€’å½’ï¼Œä¹Ÿä¸éœ€è¦çº ç»“æ˜¯ä¸æ˜¯å†…å­˜æ¢æ—¶é—´ã€‚ ç†è§£åŠ¨æ€è§„åˆ’å¹¶ä¸éœ€è¦æ•°å­¦å…¬å¼ä»‹å…¥ï¼Œåªæ˜¯å®Œå…¨è§£é‡Šæ¸…æ¥šéœ€è¦ç‚¹ç¯‡å¹…â€¦é¦–å…ˆéœ€è¦æ˜ç™½å“ªäº›é—®é¢˜ä¸æ˜¯åŠ¨æ€è§„åˆ’å¯ä»¥è§£å†³çš„ï¼Œæ‰èƒ½æ˜ç™½ä¸ºç¥é©¬éœ€è¦åŠ¨æ€è§„åˆ’ã€‚ä¸è¿‡å¥½å¤„æ—¶é¡ºä¾¿ä¹Ÿå°±ææ˜ç™½äº†é€’æ¨è´ªå¿ƒæœç´¢å’ŒåŠ¨è§„ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä»¥åŠå¸®åŠ©é‚£äº›æ€»æ˜¯æŠŠåŠ¨è§„å½“æˆæœç´¢è§£çš„åŒå­¦å»ºç«‹åŠ¨è§„çš„æ€è·¯ã€‚å½“ç„¶ç†Ÿæ‚‰äº†ä¹‹åå¯ä»¥ç›´æ¥æ ¹æ®é—®é¢˜çš„æè¿°å¾—åˆ°æ€è·¯ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯å†è¡¥å……å§ã€‚ åŠ¨æ€è§„åˆ’æ˜¯å¯¹äº æŸä¸€ç±»é—®é¢˜ çš„è§£å†³æ–¹æ³•ï¼ï¼é‡ç‚¹åœ¨äºå¦‚ä½•é‰´å®šâ€œæŸä¸€ç±»é—®é¢˜â€æ˜¯åŠ¨æ€è§„åˆ’å¯è§£çš„è€Œä¸æ˜¯çº ç»“è§£å†³æ–¹æ³•æ˜¯é€’å½’è¿˜æ˜¯é€’æ¨ï¼ æ€ä¹ˆé‰´å®šdpå¯è§£çš„ä¸€ç±»é—®é¢˜éœ€è¦ä»è®¡ç®—æœºæ˜¯æ€ä¹ˆå·¥ä½œçš„è¯´èµ·â€¦è®¡ç®—æœºçš„æœ¬è´¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå†…å­˜é‡Œå­˜å‚¨çš„æ‰€æœ‰æ•°æ®æ„æˆäº†å½“å‰çš„çŠ¶æ€ï¼ŒCPUåªèƒ½åˆ©ç”¨å½“å‰çš„çŠ¶æ€è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆä¸è¦çº ç»“ç¡¬ç›˜ä¹‹ç±»çš„å¤–éƒ¨å­˜å‚¨ï¼Œå°±ç®—è€ƒè™‘ä»–ä»¬ä¹Ÿåªæ˜¯æ‰©å¤§äº†çŠ¶æ€çš„å­˜å‚¨å®¹é‡è€Œå·²ï¼Œå¹¶ä¸èƒ½æ”¹å˜ä¸‹ä¸€ä¸ªçŠ¶æ€åªèƒ½ä»å½“å‰çŠ¶æ€è®¡ç®—å‡ºæ¥è¿™ä¸€æ¡é“å¾‹ï¼‰ å½“ä½ ä¼å›¾ä½¿ç”¨è®¡ç®—æœºè§£å†³ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå…¶å®å°±æ˜¯åœ¨æ€è€ƒå¦‚ä½•å°†è¿™ä¸ªé—®é¢˜è¡¨è¾¾æˆçŠ¶æ€ï¼ˆç”¨å“ªäº›å˜é‡å­˜å‚¨å“ªäº›æ•°æ®ï¼‰ä»¥åŠå¦‚ä½•åœ¨çŠ¶æ€ä¸­è½¬ç§»ï¼ˆæ€æ ·æ ¹æ®ä¸€äº›å˜é‡è®¡ç®—å‡ºå¦ä¸€äº›å˜é‡ï¼‰ã€‚æ‰€ä»¥æ‰€è°“çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ä¸ºäº†æ”¯æŒä½ çš„è®¡ç®—æ‰€å¿…éœ€å­˜å‚¨çš„çŠ¶æ€æœ€å¤šæœ‰å¤šå°‘ï¼Œæ‰€è°“æ—¶é—´å¤æ‚åº¦å°±æ˜¯ä»åˆå§‹çŠ¶æ€åˆ°è¾¾æœ€ç»ˆçŠ¶æ€ä¸­é—´éœ€è¦å¤šå°‘æ­¥ï¼ å¤ªæŠ½è±¡äº†è¿˜æ˜¯ä¸¾ä¸ªä¾‹å­å§ï¼š æ¯”å¦‚è¯´æˆ‘æƒ³è®¡ç®—ç¬¬100ä¸ªéæ³¢é‚£å¥‘æ•°ï¼Œæ¯ä¸€ä¸ªéæ³¢é‚£å¥‘æ•°å°±æ˜¯è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ï¼Œæ¯æ±‚ä¸€ä¸ªæ–°æ•°å­—åªéœ€è¦ä¹‹å‰çš„ä¸¤ä¸ªçŠ¶æ€ã€‚æ‰€ä»¥åŒä¸€ä¸ªæ—¶åˆ»ï¼Œæœ€å¤šåªéœ€è¦ä¿å­˜ä¸¤ä¸ªçŠ¶æ€ï¼Œç©ºé—´å¤æ‚åº¦å°±æ˜¯å¸¸æ•°ï¼›æ¯è®¡ç®—ä¸€ä¸ªæ–°çŠ¶æ€æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿæ˜¯å¸¸æ•°ä¸”çŠ¶æ€æ˜¯çº¿æ€§é€’å¢çš„ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯çº¿æ€§çš„ã€‚ ä¸Šé¢è¿™ç§çŠ¶æ€è®¡ç®—å¾ˆç›´æ¥ï¼Œåªéœ€è¦ä¾ç…§å›ºå®šçš„æ¨¡å¼ä»æ—§çŠ¶æ€è®¡ç®—å‡ºæ–°çŠ¶æ€å°±è¡Œï¼ˆa[i]=a[i-1]+a[i-2]ï¼‰ï¼Œä¸éœ€è¦è€ƒè™‘æ˜¯ä¸æ˜¯éœ€è¦æ›´å¤šçš„çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦é€‰æ‹©å“ªäº›æ—§çŠ¶æ€æ¥è®¡ç®—æ–°çŠ¶æ€ã€‚å¯¹äºè¿™æ ·çš„è§£æ³•ï¼Œæˆ‘ä»¬å«é€’æ¨ã€‚ éæ³¢é‚£å¥‘é‚£ä¸ªä¾‹å­è¿‡äºç®€å•ï¼Œä»¥è‡³äºè®©äººå¿½è§†äº†é˜¶æ®µçš„æ¦‚å¿µï¼Œæ‰€è°“é˜¶æ®µæ˜¯æŒ‡éšç€é—®é¢˜çš„è§£å†³ï¼Œåœ¨åŒä¸€ä¸ªæ—¶åˆ»å¯èƒ½ä¼šå¾—åˆ°çš„ä¸åŒçŠ¶æ€çš„é›†åˆã€‚éæ³¢é‚£å¥‘æ•°åˆ—ä¸­ï¼Œæ¯ä¸€æ­¥ä¼šè®¡ç®—å¾—åˆ°ä¸€ä¸ªæ–°æ•°å­—ï¼Œæ‰€ä»¥æ¯ä¸ªé˜¶æ®µåªæœ‰ä¸€ä¸ªçŠ¶æ€ã€‚æƒ³è±¡å¦å¤–ä¸€ä¸ªé—®é¢˜æƒ…æ™¯ï¼Œå‡å¦‚æŠŠä½ æ”¾åœ¨ä¸€ä¸ªå›´æ£‹æ£‹ç›˜ä¸Šçš„æŸä¸€ç‚¹ï¼Œä½ æ¯ä¸€æ­¥åªèƒ½èµ°ä¸€æ ¼ï¼Œå› ä¸ºä½ å¯ä»¥ä¸œå—è¥¿åŒ—éšä¾¿èµ°ï¼Œæ‰€ä»¥ä½ å½“ä½ åŒæ ·èµ°å››æ­¥å¯èƒ½ä¼šå¤„äºå¾ˆå¤šä¸ªä¸åŒçš„ä½ç½®ã€‚ä»å¤´å¼€å§‹èµ°äº†å‡ æ­¥å°±æ˜¯ç¬¬å‡ ä¸ªé˜¶æ®µï¼Œèµ°äº†næ­¥å¯èƒ½å¤„äºçš„ä½ç½®ç§°ä¸ºä¸€ä¸ªçŠ¶æ€ï¼Œèµ°äº†è¿™næ­¥æ‰€æœ‰å¯èƒ½åˆ°è¾¾çš„ä½ç½®çš„é›†åˆå°±æ˜¯è¿™ä¸ªé˜¶æ®µä¸‹æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ã€‚ ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæœ‰äº†é˜¶æ®µä¹‹åï¼Œè®¡ç®—æ–°çŠ¶æ€å¯èƒ½ä¼šé‡åˆ°å„ç§å¥‡è‘©çš„æƒ…å†µï¼Œé’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼Œå°±éœ€è¦ä¸åŒçš„ç®—æ³•ï¼Œä¸‹é¢å°±åˆ†æƒ…å†µæ¥è¯´æ˜ä¸€ä¸‹ï¼š å‡å¦‚é—®é¢˜æœ‰nä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¤šä¸ªçŠ¶æ€ï¼Œä¸åŒé˜¶æ®µçš„çŠ¶æ€æ•°ä¸å¿…ç›¸åŒï¼Œä¸€ä¸ªé˜¶æ®µçš„ä¸€ä¸ªçŠ¶æ€å¯ä»¥å¾—åˆ°ä¸‹ä¸ªé˜¶æ®µçš„æ‰€æœ‰çŠ¶æ€ä¸­çš„å‡ ä¸ªã€‚é‚£æˆ‘ä»¬è¦è®¡ç®—å‡ºæœ€ç»ˆé˜¶æ®µçš„çŠ¶æ€æ•°è‡ªç„¶è¦ç»å†ä¹‹å‰æ¯ä¸ªé˜¶æ®µçš„æŸäº›çŠ¶æ€ã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸçš„è®¡ç®—æ‰€æœ‰çŠ¶æ€ï¼Œæ¯”å¦‚è¿™æ ·ä¸€ä¸ªå¼±æ™ºçš„æ£‹ç›˜é—®é¢˜ï¼šä»æ£‹ç›˜çš„å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’æœ€çŸ­éœ€è¦å‡ æ­¥ã€‚ç­”æ¡ˆå¾ˆæ˜¾ç„¶ï¼Œç”¨è¿™æ ·ä¸€ä¸ªå¼±æ™ºçš„é—®é¢˜æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬ç†è§£é˜¶æ®µå’ŒçŠ¶æ€ã€‚æŸä¸ªé˜¶æ®µç¡®å®å¯ä»¥æœ‰å¤šä¸ªçŠ¶æ€ï¼Œæ­£å¦‚è¿™ä¸ªé—®é¢˜ä¸­èµ°næ­¥å¯ä»¥èµ°åˆ°å¾ˆå¤šä½ç½®ä¸€æ ·ã€‚ä½†æ˜¯åŒæ ·næ­¥ä¸­ï¼Œæœ‰å“ªäº›ä½ç½®å¯ä»¥è®©æˆ‘ä»¬åœ¨ç¬¬n+1æ­¥ä¸­èµ°çš„æœ€è¿œå‘¢ï¼Ÿæ²¡é”™ï¼Œæ­£æ˜¯ç¬¬næ­¥ä¸­èµ°çš„æœ€è¿œçš„ä½ç½®ã€‚æ¢æˆä¸€å¥ç†Ÿæ‚‰è¯å«åšâ€œä¸‹ä¸€æ­¥æœ€ä¼˜æ˜¯ä»å½“å‰æœ€ä¼˜å¾—åˆ°çš„â€ã€‚æ‰€ä»¥ä¸ºäº†è®¡ç®—æœ€ç»ˆçš„æœ€ä¼˜å€¼ï¼Œåªéœ€è¦å­˜å‚¨æ¯ä¸€æ­¥çš„æœ€ä¼˜å€¼å³å¯ï¼Œè§£å†³ç¬¦åˆè¿™ç§æ€§è´¨çš„é—®é¢˜çš„ç®—æ³•å°±å«è´ªå¿ƒã€‚å¦‚æœåªçœ‹æœ€ä¼˜çŠ¶æ€ä¹‹é—´çš„è®¡ç®—è¿‡ç¨‹æ˜¯ä¸æ˜¯å’Œéæ³¢é‚£å¥‘æ•°åˆ—çš„è®¡ç®—å¾ˆåƒï¼Ÿæ‰€ä»¥è®¡ç®—çš„æ–¹æ³•æ˜¯é€’æ¨ã€‚ æ—¢ç„¶é—®é¢˜éƒ½æ˜¯å¯ä»¥åˆ’åˆ†æˆé˜¶æ®µå’ŒçŠ¶æ€çš„ã€‚è¿™æ ·ä¸€æ¥æˆ‘ä»¬ä¸€ä¸‹å­è§£å†³äº†ä¸€å¤§ç±»é—®é¢˜ï¼šä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¯ä»¥ç”±å‰ä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¾—åˆ°ã€‚ å¦‚æœä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜æ— æ³•ç”¨å‰ä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¾—åˆ°å‘¢ï¼Ÿ ä»€ä¹ˆä½ è¯´åªéœ€è¦ä¹‹å‰ä¸¤ä¸ªé˜¶æ®µå°±å¯ä»¥å¾—åˆ°å½“å‰æœ€ä¼˜ï¼Ÿé‚£è·Ÿåªç”¨ä¹‹å‰ä¸€ä¸ªé˜¶æ®µå¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚æœ€éº»çƒ¦çš„æƒ…å†µåœ¨äºä½ éœ€è¦ä¹‹å‰æ‰€æœ‰çš„æƒ…å†µæ‰è¡Œã€‚ å†æ¥ä¸€ä¸ªè¿·å®«çš„ä¾‹å­ã€‚åœ¨è®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯çº¿æ—¶ï¼Œä½ ä¸èƒ½åªä¿å­˜å½“å‰é˜¶æ®µçš„çŠ¶æ€ï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚ä½ æœ€çŸ­ï¼Œæ‰€ä»¥ä½ å¿…é¡»çŸ¥é“ä¹‹å‰èµ°è¿‡çš„æ‰€æœ‰ä½ç½®ã€‚å› ä¸ºå³ä¾¿ä½ å½“å‰å†çš„ä½ç½®ä¸å˜ï¼Œä¹‹å‰çš„è·¯çº¿ä¸åŒä¼šå½±å“ä½ çš„ä¹‹åèµ°çš„è·¯çº¿ã€‚è¿™æ—¶ä½ éœ€è¦ä¿å­˜çš„æ˜¯ä¹‹å‰æ¯ä¸ªé˜¶æ®µæ‰€ç»å†çš„é‚£ä¸ªçŠ¶æ€ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯æ‰èƒ½è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ æ¯ä¸ªé˜¶æ®µçš„çŠ¶æ€æˆ–è®¸ä¸å¤šï¼Œä½†æ˜¯æ¯ä¸ªçŠ¶æ€éƒ½å¯ä»¥è½¬ç§»åˆ°ä¸‹ä¸€é˜¶æ®µçš„å¤šä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥è§£çš„å¤æ‚åº¦å°±æ˜¯æŒ‡æ•°çš„ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯æŒ‡æ•°çš„ã€‚å“¦å“¦ï¼Œåˆšåˆšæåˆ°çš„ä¹‹å‰çš„è·¯çº¿ä¼šå½±å“åˆ°ä¸‹ä¸€æ­¥çš„é€‰æ‹©ï¼Œè¿™ä¸ªä»¤äººä¸å¼€å¿ƒçš„æƒ…å†µå°±å«åšæœ‰åæ•ˆæ€§ã€‚ åˆšåˆšçš„æƒ…å†µå®åœ¨å¤ªæ™®éï¼Œè§£å†³æ–¹æ³•å®åœ¨å¤ªæš´åŠ›ï¼Œæœ‰æ²¡æœ‰å“ªäº›æƒ…å†µå¯ä»¥é¿å…å¦‚æ­¤çš„æš´åŠ›å‘¢ï¼Ÿ å¥‘æœºå°±åœ¨äºåæ•ˆæ€§ã€‚ æœ‰ä¸€ç±»é—®é¢˜ï¼Œçœ‹ä¼¼éœ€è¦ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€ï¼Œå…¶å®ä¸ç”¨ã€‚ä¸å¦¨ä¹Ÿæ˜¯æ‹¿æœ€é•¿ä¸Šå‡å­åºåˆ—çš„ä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆä»–ä¸å¿…éœ€è¦æš´åŠ›æœç´¢ï¼Œè¿›è€Œå¼•å‡ºåŠ¨æ€è§„åˆ’çš„æ€è·¯ã€‚ å‡è£…æˆ‘ä»¬å¹´å¹¼æ— çŸ¥æƒ³ç”¨æœç´¢å»å¯»æ‰¾æœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚æ€ä¹ˆæœç´¢å‘¢ï¼Ÿéœ€è¦ä»å¤´åˆ°å°¾ä¾æ¬¡æšä¸¾æ˜¯å¦é€‰æ‹©å½“å‰çš„æ•°å­—ï¼Œæ¯é€‰å®šä¸€ä¸ªæ•°å­—å°±è¦å»çœ‹çœ‹æ˜¯ä¸æ˜¯æ»¡è¶³â€œä¸Šå‡â€çš„æ€§è´¨ï¼Œè¿™é‡Œç¬¬iä¸ªé˜¶æ®µå°±æ˜¯å»æ€è€ƒæ˜¯å¦è¦é€‰æ‹©ç¬¬iä¸ªæ•°ï¼Œç¬¬iä¸ªé˜¶æ®µæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯é€‰å’Œä¸é€‰ã€‚å“ˆå“ˆï¼Œä¾ç¨€å‡ºç°äº†åˆšåˆšè¿·å®«æ‰¾è·¯çš„å½±å­ï¼å’¦æ…¢ç€ï¼Œæ¯æ¬¡å½“æˆ‘å†³å®šè¦é€‰æ‹©å½“å‰æ•°å­—çš„æ—¶å€™ï¼Œåªéœ€è¦å’Œä¹‹å‰é€‰å®šçš„ä¸€ä¸ªæ•°å­—æ¯”è¾ƒå°±è¡Œäº†ï¼è¿™æ˜¯å’Œä¹‹å‰è¿·å®«é—®é¢˜çš„æœ¬è´¨ä¸åŒï¼è¿™å°±å¯ä»¥çºµå®¹æˆ‘ä»¬ä¸éœ€è¦è®°å½•ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€å•Šï¼æ—¢ç„¶æˆ‘ä»¬çš„é€‰æ‹©å·²ç»ä¸å—ä¹‹å‰çŠ¶æ€çš„ç»„åˆçš„å½±å“äº†ï¼Œé‚£æ—¶é—´å¤æ‚åº¦è‡ªç„¶ä¹Ÿä¸æ˜¯æŒ‡æ•°çš„äº†å•Šï¼è™½ç„¶æˆ‘ä»¬ä¸åœ¨ä¹æŸåºåˆ—ä¹‹å‰éƒ½æ˜¯ä»€ä¹ˆå…ƒç´ ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¿™ä¸ªåºåˆ—çš„é•¿åº¦çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•ä»¥æŸä¸ªå…ƒç´ ç»“å°¾çš„LISé•¿åº¦å°±å¥½ï¼å› æ­¤ç¬¬iä¸ªé˜¶æ®µçš„æœ€ä¼˜è§£åªæ˜¯ç”±å‰i-1ä¸ªé˜¶æ®µçš„æœ€ä¼˜è§£å¾—åˆ°çš„ï¼Œç„¶åå°±å¾—åˆ°äº†DPæ–¹ç¨‹ï¼ˆæ„Ÿè°¢ @éŸ©æ›¦ æŒ‡æ­£ï¼‰ æ‰€ä»¥ä¸€ä¸ªé—®é¢˜æ˜¯è¯¥ç”¨é€’æ¨ã€è´ªå¿ƒã€æœç´¢è¿˜æ˜¯åŠ¨æ€è§„åˆ’ï¼Œå®Œå…¨æ˜¯ç”±è¿™ä¸ªé—®é¢˜æœ¬èº«é˜¶æ®µé—´çŠ¶æ€çš„è½¬ç§»æ–¹å¼å†³å®šçš„ï¼ æ¯ä¸ªé˜¶æ®µåªæœ‰ä¸€ä¸ªçŠ¶æ€-&gt;é€’æ¨ï¼› æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€éƒ½æ˜¯ç”±ä¸Šä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¾—åˆ°çš„-&gt;è´ªå¿ƒï¼› æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€æ˜¯ç”±ä¹‹å‰æ‰€æœ‰é˜¶æ®µçš„çŠ¶æ€çš„ç»„åˆå¾—åˆ°çš„-&gt;æœç´¢ï¼› æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¯ä»¥ä»ä¹‹å‰æŸä¸ªé˜¶æ®µçš„æŸä¸ªæˆ–æŸäº›çŠ¶æ€ç›´æ¥å¾—åˆ°è€Œä¸ç®¡ä¹‹å‰è¿™ä¸ªçŠ¶æ€æ˜¯å¦‚ä½•å¾—åˆ°çš„-&gt;åŠ¨æ€è§„åˆ’ã€‚ æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¯ä»¥ä»ä¹‹å‰æŸä¸ªé˜¶æ®µçš„æŸä¸ªæˆ–æŸäº›çŠ¶æ€ç›´æ¥å¾—åˆ° è¿™ä¸ªæ€§è´¨å«åšæœ€ä¼˜å­ç»“æ„ï¼› è€Œä¸ç®¡ä¹‹å‰è¿™ä¸ªçŠ¶æ€æ˜¯å¦‚ä½•å¾—åˆ°çš„ è¿™ä¸ªæ€§è´¨å«åšæ— åæ•ˆæ€§ã€‚ å¦ï¼šå…¶å®åŠ¨æ€è§„åˆ’ä¸­çš„æœ€ä¼˜çŠ¶æ€çš„è¯´æ³•å®¹æ˜“äº§ç”Ÿè¯¯å¯¼ï¼Œä»¥ä¸ºåªéœ€è¦è®¡ç®—æœ€ä¼˜çŠ¶æ€å°±å¥½ï¼ŒLISé—®é¢˜ç¡®å®å¦‚æ­¤ï¼Œè½¬ç§»æ—¶åªç”¨åˆ°äº†æ¯ä¸ªé˜¶æ®µâ€œé€‰â€çš„çŠ¶æ€ã€‚ä½†å®é™…ä¸Šæœ‰çš„é—®é¢˜å¾€å¾€éœ€è¦å¯¹æ¯ä¸ªé˜¶æ®µçš„æ‰€æœ‰çŠ¶æ€éƒ½ç®—å‡ºä¸€ä¸ªæœ€ä¼˜å€¼ï¼Œç„¶åæ ¹æ®è¿™äº›æœ€ä¼˜å€¼å†æ¥æ‰¾æœ€ä¼˜çŠ¶æ€ã€‚æ¯”å¦‚èƒŒåŒ…é—®é¢˜å°±éœ€è¦å¯¹å‰iä¸ªåŒ…ï¼ˆé˜¶æ®µï¼‰å®¹é‡ä¸ºjæ—¶ï¼ˆçŠ¶æ€ï¼‰è®¡ç®—å‡ºæœ€å¤§ä»·å€¼ã€‚ç„¶ååœ¨æœ€åä¸€ä¸ªé˜¶æ®µä¸­çš„æ‰€æœ‰çŠ¶æ€ç§æ‰¾åˆ°æœ€ä¼˜å€¼ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>dp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PyTorch çš„ dataloader å¦‚ä½•è¯»å–å˜é•¿æ•°æ®]]></title>
    <url>%2F2019%2F04%2F03%2Fpytorch-dataloader-load-different-length-data%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è½¬è½½è‡ª çŸ¥ä¹ Charlieçš„è¯­éŸ³å¤„ç†å®éªŒå®¤ åŸæ–‡é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/60129684 æœ€è¿‘åœ¨åšä¸€ä¸ªæ–°çš„å£°å­¦æ¨¡å‹ï¼Œå…¶ä¸­é‡åˆ°ä¸€ä¸ªç‚¹å°±æ˜¯æ¯ä¸ªsentenceçš„é•¿åº¦ä¸ä¸€æ ·çš„èŠ±ï¼Œç›´æ¥ç”¨dataloaderçš„è¯»å–æ˜¯æœ‰é—®é¢˜çš„ã€‚æŸ¥äº†ä¸‹ä¸­æ–‡èµ„æ–™ï¼Œå¤§å®¶å¤§å¤šæ•°è¿™ä¸ªé—®é¢˜éƒ½æ˜¯è¶‹äºç”¨torch.nn.utils.rnn.PackedSequenceæ¥æ‰“åŒ…çš„ï¼Œè¿™ä¸ªåœ¨dataloaderé‡Œé¢å…¶å®å°±ä¸å¤ªé€‚ç”¨ï¼Œpytorchè®ºå›ä¸Šæåˆ°ç”¨dataloaderçš„collate_fnæ¥å¤„ç†çš„ï¼Œæ‰€ä»¥æƒ³å†™ä¸ªèµ„æ–™æ€»ç»“ä¸‹ ã€‚ pytorché‡Œé¢datasetçš„å·¥ä½œé€»è¾‘ï¼š pytorchçš„æ•°æ®è½½å…¥ä¸»è¦æ˜¯è¿™ä¹ˆå‡ ä¸ªé€»è¾‘ï¼Œä»åº•å±‚ä¸€æ­¥æ­¥æ¥è®²ï¼Œæˆ‘ç”¨h5çŸ©é˜µï¼Œå›¾ç‰‡å’ŒéŸ³é¢‘ä¸‰ä¸ªæ–¹é¢æ¥ä¸¾ä¾‹ï¼Œé¦–å…ˆæ˜¯é€»è¾‘å±‚æ¬¡æ˜¯ï¼Œé¦–å…ˆæŠŠdataè£…è¿›ç”¨torch.utils.data.Datasetè£…è¿›ä¸€ä¸ªdatasetçš„å¯¹è±¡é‡Œé¢ï¼Œç„¶ååœ¨æŠŠdatasetè¿™ä¸ªå¯¹è±¡ä¼ é€’ç»™ä¸€ä¸ªtorch.utils.data.DataLoader datasetçš„å·¥ä½œé€»è¾‘ æ•°æ®é›†çš„åˆ‡åˆ†ä¸€èˆ¬åœ¨datasetè¿™ä¸ªå¯¹è±¡ä¸Šåšå¤„ç†ï¼Œæ”¯æŒéšæœºåˆ‡åˆ†ç­‰ï¼Œè¯¦è§torch.utils.data - PyTorch master documentationï¼Œä¸€èˆ¬æ¥è®²ï¼Œæˆ‘éƒ½æ˜¯å†™ä¸€ä¸ªtorch.utils.data.Datasetçš„å­ç±»ï¼Œé‡Œé¢å°±ä¸‰ä¸ªæˆå‘˜å‡½æ•°ï¼Œåˆå§‹åŒ–ï¼Œé•¿åº¦å’Œè¯»å–ï¼Œä¸€èˆ¬åœ¨è¯»å–ä½ è‡ªå·±å®šä¹‰çš„è¯»å–æ–¹æ³•ï¼Œæˆ‘ä¹ æƒ¯çš„æ˜¯h5çŸ©é˜µçš„è¯ï¼Œå°±è¯»ä¸€æ®µï¼ˆå­çŸ©é˜µï¼‰ï¼Œå›¾ç‰‡å°±æ˜¯ä¸€å¼ å›¾ï¼Œæˆ–è€…ä¸€æ®µéŸ³é¢‘ã€‚ è¿™é‡Œé¢æœ‰ä¸ªå¾ˆå…³é”®çš„ç‚¹ï¼Œå°±æ˜¯datasetçš„é€»è¾‘æ˜¯ä¸€æ¬¡è¯»ä¸€ä¸ªitemï¼Œæœ€å¥½ä¸è¦åœ¨datasetå±‚é¢ä¸€æ¬¡sliceä¸€æ®µï¼Œsliceè¿™ä¸ªå±‚é¢çš„äº‹æƒ…äº¤ç»™dataloaderæ¥åšï¼ŒåŸå› æˆ‘ä¸€ä¼šè¯´ã€‚ è®°ä½datasetçš„é€»è¾‘åœ¨äºè£…å’Œitemè¯»å–ï¼Œé¢„å¤„ç†ï¼Œå…¶ä»–éƒ½ä¸è¦åšã€‚ dataloaderçš„å·¥ä½œé€»è¾‘ dataloaderå±‚é¢ä¸»è¦å°±æ˜¯sliceè¯»å–æ•°æ®ï¼Œshuffleä¹Ÿæ˜¯åœ¨è¿™ä¸ªå±‚é¢æ¥åšã€‚ dataloaderæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½é›¶é›¶ç¢ç¢çš„æåˆ°è¿‡ï¼Œæˆ‘æ€»ç»“ä¸‹ï¼Œ æ˜¯ç¨€æ¾å¹³å¸¸çš„batch_size, sampler, shuffleè¿™å‡ ä¸ªç¨€æ¾å¹³å¸¸çš„ä¸æï¼Œshuffleæ˜¯åœ¨datasetçš„itemå±‚é¢åšæ··æ´—ï¼Œ æ³¨æ„ï¼Œnum_workersæ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹çš„è¯»å–ï¼Œå½“batchsize&gt;1çš„æ—¶å€™ï¼Œå¤šçº¿ç¨‹è¯»å–item, ç„¶åå„ä¸ªitemè°ƒç”¨ä¸€ä¸ªcollate_fnåˆå¹¶æˆæ–°çš„tensorï¼Œå…¶ä¸­h5ä¾ç„¶æ˜¯ä¸ªå‘ï¼Œanacondaå®‰è£…çš„h5æ˜¯ä¸æ”¯æŒå¤šçº¿ç¨‹çš„ï¼Œè¯·å‚è€ƒå¹¶è¡Œ HDF5 å’Œ h5pyå®‰è£…å¹¶è¡Œh5ï¼Œè‡³äºnum*_*workerä»¥åŠpin_memoruçš„å…·ä½“ä½¿ç”¨ï¼Œå‚è€ƒäº‘æ¢¦ï¼šPytorch æé€ŸæŒ‡å—ï¼Œä¸é‡å¤é€ è½®å­ã€‚ å…³äºè¿™ä¸ªcollate\fnæ˜¯é‡ç‚¹ï¼Œå½“å¼€å¯å¤šçº¿ç¨‹äº†ä¸€ä¸ªï¼Œå¤šçº¿ç¨‹å…ˆåè¯»å–äº†dataseté‡Œé¢batch_sizeä¸ªitemä»¥åï¼Œç”Ÿæˆäº†ä¸€ä¸ªlist,é‡Œé¢æ¯ä¸ªå…ƒç´ å°±æ˜¯batchsizeä¸ªitemï¼Œç„¶åç”¨collatefnåˆå¹¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„collatefnsçš„è¯ï¼Œå°±ç›´æ¥åˆå¹¶æˆä¸€ä¸ªé«˜ä¸€ç»´çš„tensorã€‚ collatefnsçš„å·¥ä½œé€»è¾‘ coolatefnsçš„è¾“å…¥æ˜¯ä¸ªlistï¼Œé•¿åº¦ä¸ºbatchsizeï¼Œå…¶ä¸­å„ä¸ªå…ƒç´ æ˜¯å„ä¸ªitemï¼Œå‡½æ•°çš„ç›®çš„å°±æ˜¯åˆå¹¶ã€‚ å½“å„ä¸ªitemå˜é•¿æ—¶ï¼Œä¸æŒ‡å®šcollatefnsåˆå¹¶å°±ä¼šæŠ¥é”™ï¼Œæ‡’äººæ–¹æ³•å°±æ˜¯æŠŠåœ¨dataseté‡Œé¢çš„è¯»å–å‡½æ•°æŠŠtensoråŠ åˆ°æœ€é•¿ï¼Œå°±å¯ä»¥ç›´æ¥mergeã€‚ å½“ä½¿ç”¨collatefnsæ—¶ï¼Œpytorchè®ºå›ä¸Šæœ‰äººå†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘è´´è¿‡æ¥ï¼Œå¤§å®¶é…åˆæ³¨é‡Šçœ‹çœ‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849def pad_tensor(vec, pad, dim): """ args: vec - tensor to pad pad - the size to pad to dim - dimension to pad return: a new tensor padded to 'pad' in dimension 'dim' """ pad_size = list(vec.shape) pad_size[dim] = pad - vec.size(dim) return torch.cat([vec, torch.zeros(*pad_size)], dim=dim)class PadCollate: """ a variant of callate_fn that pads according to the longest sequence in a batch of sequences """ def __init__(self, dim=0): """ args: dim - the dimension to be padded (dimension of time in sequences) """ self.dim = dim def pad_collate(self, batch): """ args: batch - list of (tensor, label) reutrn: xs - a tensor of all examples in 'batch' after padding ys - a LongTensor of all labels in batch """ # find longest sequence max_len = max(map(lambda x: x[0].shape[self.dim], batch)) # pad according to max_len batch = map(lambda (x, y): (pad_tensor(x, pad=max_len, dim=self.dim), y), batch) # stack all xs = torch.stack(map(lambda x: x[0], batch), dim=0) ys = torch.LongTensor(map(lambda x: x[1], batch)) return xs, ys def __call__(self, batch): return self.pad_collate(batch) è°ƒç”¨ä½¿ç”¨ï¼š 1train_loader = DataLoader(ds, ..., collate_fn=PadCollate(dim=0)) æ¥æºï¼šDataLoader for various length of data å¯¹äºè¯»å–äº†ä»¥åçš„æ•°æ®ï¼Œåœ¨rnnä¸­çš„å·¥ä½œé€»è¾‘ï¼Œpytorchçš„æ–‡æ¡£ä¹Ÿæåˆ°è¿‡ total_length is useful to implement the packsequence-&gt;recurrentnetwork-&gt;unpacksequence pattern in a Module wrapped in DataParallel. See this FAQ sectionfor details. æ¥æºï¼štorch.nn - PyTorch master documentation å…³äºè¯»å–åˆ°äº†çš„paddingçš„å˜é•¿æ•°æ®ï¼Œå¦‚ä½•packï¼Œè¯·å‚è€ƒ @å°¹ç›¸æ¥  çš„ï¼š å°¹ç›¸æ¥ ï¼šPyTorch è®­ç»ƒ RNN æ—¶ï¼Œåºåˆ—é•¿åº¦ä¸å›ºå®šæ€ä¹ˆåŠï¼Ÿ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€è½¬è½½ã€‘ è…¾è®¯ç®—æ³•å®ä¹ é¢ç»]]></title>
    <url>%2F2019%2F04%2F03%2Frepost-tencent-intern-interview-summary%2F</url>
    <content type="text"><![CDATA[ç‰›å®¢ç½‘ è…¾è®¯ç®—æ³•å®ä¹ é¢è¯•æ€»ç»“â€”è®ºé¢è¯•å®˜è™æˆ‘çš„ä¸€ç™¾ç§æ–¹å¼]]></content>
      <categories>
        <category>æ±‚èŒ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Git ä½¿ç”¨ç¬”è®°]]></title>
    <url>%2F2019%2F04%2F03%2Fgit-note%2F</url>
    <content type="text"><![CDATA[å»–é›ªå³°çš„ Git æ•™ç¨‹ å°‘ç”¨ Pull å¤šç”¨ Fetch å’Œ Merge è§åˆ°å¾ˆå¤šäººè¯´è¿‡è¿™ä¸ªç»éªŒï¼ŒåŸå› å°±æ˜¯ git pull æŠŠè¿‡ç¨‹çš„ç»†èŠ‚éƒ½éšè—äº†èµ·æ¥ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å½“ä»£ç å‡ºé”™æ—¶å¯èƒ½ä¼šé€ æˆæŸå¤±ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å®æ„¿åšçš„æ…¢ä¸€äº›ï¼Œä¹Ÿä¸æ„¿æ„è¿”å·¥é‡æ¥ ä¸€èˆ¬çš„åšæ³•æ˜¯ï¼š 12git fetch origin # ä¸‹è½½è¿œç¨‹åˆ†æ”¯çš„æ›´æ–°git merge origin/master # åˆå¹¶è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ å¦‚æœä½ æƒ³åœ¨åˆå¹¶å‰æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å·®å¼‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š 1git diff master origin/master å•ç‹¬è¿›è¡Œä¸‹è½½å’Œåˆå¹¶æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹ä¸‹è½½çš„æ˜¯ä»€ä¹ˆï¼Œç„¶åå†å†³å®šæ˜¯å¦å’Œæœ¬åœ°ä»£ç åˆå¹¶ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nvcc ç¼–è¯‘æŠ¥é”™ï¼šæ‰¾ä¸åˆ° "cuda_runtime.h"]]></title>
    <url>%2F2019%2F04%2F02%2Fnvcc-fatal-error-cuda-runtime-h%2F</url>
    <content type="text"><![CDATA[å¥‡æ€ªçš„é”™è¯¯ ä»Šå¤©åœ¨å®‰è£… PANet æ—¶é‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„é”™è¯¯ï¼š 12Compiling nms kernels by nvcc...cc1plus: fatal error: cuda_runtime.h: No such file or directory æŒ‰ç†è¯´ä¸åº”è¯¥å‡ºç°è¿™ç§å¥‡æ€ªçš„é”™è¯¯ï¼Œcuda_runtime.h å°±å®‰é™åœ°èººåœ¨ /usr/local/cuda/include ç›®å½•ä¸‹ï¼Œcuda å®‰è£…æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™ä¸ªä»“åº“åœ¨å®éªŒå®¤çš„æœåŠ¡å™¨ä¸Šä¹Ÿè·‘è¿‡ï¼Œå®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ç„¶è€Œå°±æ˜¯è¿™æ ·çš„é”™è¯¯è´¹äº†è€åŠå¤©æ—¶é—´ä¹Ÿæ— æ³•å®šä½åŸå› ï¼Œç½‘ä¸Šçš„è§£å†³åŠæ³•æ— éå°±æ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜ï¼Œå¤šæ¬¡ç¡®è®¤ä¹‹åç¯å¢ƒå˜é‡æ˜¯æ²¡æœ‰é—®é¢˜çš„ ğŸ˜© éš¾é“è¦å› ä¸ºè¿™ä¸ªé”™è¯¯é‡è£… cudaï¼Ÿ é‡è£…æ˜¯ä¸å¤ªå¯èƒ½çš„ï¼ŒæœåŠ¡å™¨ä¸Šé…ç¯å¢ƒå¤ªè´¹äº‹ï¼Œ äºæ˜¯æŸ¥çœ‹ nvcc å‘½ä»¤å¸®åŠ©ï¼Œæœç„¶å…¶ä¸­å†™ç€å¯ä»¥ç”¨ -I é€‰é¡¹æŒ‡å®šåŒ…å«å¤´æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿…é€Ÿåœ¨ PANet/lib/make.sh ä¸­æœ‰å…³ nvcc çš„å‘½ä»¤åŠ ä¸Š -I /usr/local/cuda/include ï¼Œè¿è¡Œï¼ŒæˆåŠŸ ğŸ˜ ä¼°è®¡æ˜¯ç¯å¢ƒå˜é‡å‡ºç°äº†æŸç§é”™è¯¯ï¼Œè™½ç„¶åˆ°æœ€åä¹Ÿæ²¡æœ‰ææ˜ç™½ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œä½†å¥½æ­¹æ˜¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜è¯´æ˜äº†é‡äº‹ä¸èƒ½åªé ç™¾åº¦ï¼Œè¦è‡ªå·±å¥½å¥½åˆ†æ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>cuda</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡ SSH éš§é“è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„ Jupyter Notebook]]></title>
    <url>%2F2019%2F02%2F24%2FRemote-jupyter-notebook%2F</url>
    <content type="text"><![CDATA[å‚è€ƒ: https://www.howtoing.com/how-to-install-run-connect-to-jupyter-notebook-on-remote-server åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ²¡æœ‰å®‰è£…æµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡åœ¨æœ¬åœ°å»ºç«‹ SSH éš§é“çš„æ–¹æ³•ä½¿ç”¨æœåŠ¡å™¨çš„ Jupyter Notebook 1. æœåŠ¡å™¨ç«¯ é¦–å…ˆç¡®ä¿æœåŠ¡å™¨ç«¯å®‰è£…äº† Jupyter Notebookï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ conda ç¯å¢ƒï¼Œè¿˜è¦å®‰è£… ipykernel ç­‰åŒ… è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œè¿è¡Œ Jupyter Notebook 1jupyter notebook æ ¹æ®è¾“å‡ºçš„ä¿¡æ¯å¯ä»¥çœ‹åˆ°æ— æ³•æ‰¾åˆ°å¯ç”¨çš„æµè§ˆå™¨ 12345[I 09:56:37.551 NotebookApp] Serving notebooks from local directory: /home/liuxiangyu[I 09:56:37.551 NotebookApp] The Jupyter Notebook is running at:[I 09:56:37.552 NotebookApp] http://172.17.0.2:8888/?token=******[I 09:56:37.552 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).[W 09:56:37.557 NotebookApp] No web browser found: could not locate runnable browser. æ³¨æ„ï¼šå¦‚æœæŠ¥é”™ä¿¡æ¯æç¤ºåœ°å€å·²ç»è¢«å ç”¨ï¼Œé‚£ä¹ˆä¹…éœ€è¦ä¿®æ”¹ä¸€ä¸‹ Jupyter Notebook çš„é»˜è®¤åœ°å€ã€‚ä¿®æ”¹æ–¹å¼å¦‚ä¸‹ï¼š é…ç½® Jupyter Notebook 1jupyter notebook --generate-config è¿è¡Œå‘½ä»¤åå°†ä¼šåœ¨ä¸»ç›®å½•ä¸‹ç”Ÿæˆ .jupyter/jupyter_notebook_config.py æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶æ‰¾åˆ° #c.NotebookApp.ip = 'localhost'ï¼ŒæŠŠ # å·å»æ‰ï¼Œlocalhost æ”¹æˆè‡ªå·±çš„ ip åœ°å€ï¼ˆåœ¨ä¸Šé¢è¾“å‡ºä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°ï¼‰ ä¿å­˜åå…³é—­æ–‡ä»¶ï¼Œé‡å¯ Jupyter Notebook å³å¯ è‡³æ­¤ï¼ŒæœåŠ¡å™¨ç«¯çš„å‡†å¤‡å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½æœåŠ¡å™¨çš„åœ°å€ 172.17.0.2 å’Œç«¯å£å· 8008 2. æœ¬åœ° ä»¥ Windows ç³»ç»Ÿä¸ºä¾‹ï¼Œä¸‹è½½ putty æ‰“å¼€ putty ååœ¨æœåŠ¡å™¨åœ°å€å’Œç«¯å£å¤„æ­£ç¡®å¡«å†™ä¿¡æ¯ï¼Œç„¶ååœ¨å·¦ä¾§ ssh é€‰é¡¹ä¸‹é€‰æ‹© Tunnels Source port å¡«å†™æœ¬åœ°æƒ³ç”¨çš„ç«¯å£å·ï¼Œä»¥ 8000 ä¸ºä¾‹ Destination å¡«å†™ æœåŠ¡å™¨åœ°å€ 172.17.0.2:8888 å…¶ä»–é€‰é¡¹ä¸è¦ä¿®æ”¹ï¼Œæœ€åä¸è¦å¿˜è®°ç‚¹å‡» Addï¼Œç„¶åè¿æ¥å³å¯ è¿æ¥åˆ°æœåŠ¡å™¨åè¿›å…¥ç›¸åº”çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿è¡Œ Jupyter Notebookï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨è¾“å…¥åœ°å€ https://localhost:8000 å³å¯æ‰“å¼€ notebook. ç¬¬ä¸€æ¬¡è¿›å…¥ notebook å¯èƒ½éœ€è¦è¾“å…¥ tokenï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥ç›¸åº”çš„ token å³å¯ Done! ğŸ˜]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>env</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Detectron å®‰è£…æ­¥éª¤]]></title>
    <url>%2F2019%2F01%2F20%2Fdetectron-installation%2F</url>
    <content type="text"><![CDATA[Requirementsï¼š Linux 16.04, Python2, NVIDIA GPU (Detectron ç›®å‰åªæœ‰ GPU ç‰ˆæœ¬) CUDA 9.0, cuDNN7.0.5 Caffe2, COCO API ä¸ºä¿æŒ Python ç¯å¢ƒçš„ç‹¬ç«‹æ€§ä¸å®Œæ•´æ€§ï¼Œå®‰è£…å‰æ–°å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¸‹å®‰è£…è¿‡ç¨‹åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿›è¡Œ 123# åœ¨ä¸»ç¯å¢ƒä¸‹conda create -n detectron python=2.7source activate detectron [TOC] CUDA &amp; cuDNN å®‰è£… CUDA9.0 å’Œ cuDNN7.0.5ï¼Œå…·ä½“å®‰è£…æ­¥éª¤å‚è€ƒè‹±ä¼Ÿè¾¾å®˜ç½‘ Caffe2 1. ä»æºç ç¼–è¯‘ ä»¥ä¸‹ä¸ºæºç ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå°è¯•è¿‡å®‰è£… Pre-Built Binariesï¼Œç»“æœå¤±è´¥äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…é¢„ç¼–è¯‘æ–‡ä»¶ï¼ˆæ¨èï¼‰ï¼Œ[2. å®‰è£…é¢„ç¼–è¯‘æ–‡ä»¶](#2. å®‰è£…é¢„ç¼–è¯‘æ–‡ä»¶) å®‰è£…ä¾èµ–åŒ… 1234567891011121314151617181920212223242526sudo apt-get updatesudo apt-get install -y --no-install-recommends \ build-essential \ git \ libgoogle-glog-dev \ libgtest-dev \ libiomp-dev \ libleveldb-dev \ liblmdb-dev \ libopencv-dev \ libopenmpi-dev \ libsnappy-dev \ libprotobuf-dev \ openmpi-bin \ openmpi-doc \ protobuf-compiler \ python-dev \ python-pip \ libgflags-dev \ cmakepip install --user \ future \ numpy \ protobuf \ typing \ hypothesis pip install ä½¿ç”¨é»˜è®¤é•œåƒä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æ¸…åå¤§å­¦ pypi é•œåƒ 123456# for temporary usepip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package# set to defaultpip install pip -U # upgrade pip to the latest version (&gt;=10.0.0)pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple ä¸‹è½½ä»£ç ä»“åº“å¹¶ç¼–è¯‘ 1234git clone https://github.com/pytorch/pytorch.git &amp;&amp; cd pytorchgit submodule update --init --recursive # å®‰è£…æ‰€éœ€å­æ¨¡å—conda install pyyaml # å®‰è£…ç¼ºå°‘çš„ä¾èµ–åŒ…python setup.py install å¦‚æœç¼–è¯‘é¡ºåˆ©é€šè¿‡ï¼Œæ­å–œï¼Œæ¥ä¸‹æ¥æµ‹è¯• caffe2 å®‰è£…æ˜¯å¦æ­£ç¡®ï¼Œ[3. å®‰è£…åæµ‹è¯•](#3. å®‰è£…åæµ‹è¯•) é”™è¯¯ä¿¡æ¯1ï¼šæœåŠ¡å™¨å®‰è£…çš„ git åœ¨æ‰§è¡Œ clone å‘½ä»¤æ—¶æŠ¥é”™æ‰¾ä¸åˆ° https åè®®ï¼Œåº”è¯¥æ˜¯å®‰è£…ä¸å®Œæ•´å¯¼è‡´çš„ï¼Œå¯ä»¥åœ¨å½“å‰ç¯å¢ƒä¸‹é‡æ–°å®‰è£… git åé‡è¯•ï¼ˆä½¿ç”¨å‘½ä»¤ conda install gitï¼Œæ¨èï¼‰æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä»£æ›¿ï¼š 1git clone git://github.com/pytorch/pytorch.git &amp;&amp; cd pytorch é”™è¯¯ä¿¡æ¯2ï¼ˆæœªè§£å†³ï¼‰ï¼šåœ¨æ‰§è¡Œå®‰è£…å‘½ä»¤æ—¶ (python setup.py install)ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š 1Â·Â·Â·Â·Â·Â·/libmklml_intel.so: file not recognized: File truncated. è¯¥é”™è¯¯æŒ‡å‘ pytorch/third_party/ideep/mkl-dnn/external/mklml_lnx_2019.0.1.20180928/lib/libmklml_intel.so æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯æ–‡ä»¶ä¸å®Œæ•´å¯¼è‡´çš„é”™è¯¯ï¼Œä½†æ˜¯æœªæ‰¾åˆ°åŸå› åŠè§£å†³æ–¹æ³•ã€‚å¦‚æœå‡ºç°æ­¤é”™è¯¯è¯·å°è¯•é€šè¿‡é¢„ç¼–è¯‘æ–‡ä»¶å®‰è£… caffe2. å…¶ä»–é”™è¯¯ï¼šæŸ¥çœ‹ Caffe2 troubleshooting 2. å®‰è£…é¢„ç¼–è¯‘æ–‡ä»¶ Caffe2 åªæä¾› Anaconda çš„é¢„ç¼–è¯‘å®‰è£…åŒ…ï¼Œéœ€è¦å®‰è£… Anaconda æˆ– Miniconda é¦–å…ˆæ·»åŠ æ¸…åå¤§å­¦ç»´æŠ¤çš„ PyTorch æºï¼Œä¸‹è½½é€Ÿåº¦æ›´å¿«ï¼š 1conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ ç„¶åæ‰§è¡Œå®‰è£…æ“ä½œï¼š 1conda install pytorch-nightly 3. å®‰è£…åæµ‹è¯• å®‰è£…å®Œæˆåï¼Œæµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ 123456# To check if Caffe2 build was successfulpython -c 'from caffe2.python import core' 2&gt;/dev/null &amp;&amp; echo "Success" || echo "Failure"# To check if Caffe2 GPU build was successful# This must print a number &gt; 0 in order to use Detectronpython -c 'from caffe2.python import workspace; print(workspace.NumCudaDevices())' æ ¹æ®æ‰§è¡Œç»“æœåˆ¤æ–­å®‰è£…æ˜¯å¦æˆåŠŸ ä»æºç ç¼–è¯‘éœ€æ³¨æ„ï¼š If the caffe2 Python package is not found, you likely need to adjust your PYTHONPATH environment variable to include its location (/path/to/caffe2/build, where build is the Caffe2 CMake build directory). COCO API ä¾èµ–ï¼š setuptools&gt;=18.0 cython&gt;=0.27.3 matplotlib&gt;=2.1.0 123456conda install setuptools cython matplotlibCOCOAPI=/path/to/clone/cocoapi # æŒ‡å®šå®‰è£…è·¯å¾„git clone https://github.com/cocodataset/cocoapi.git $COCOAPIcd $COCOAPI/PythonAPImake#python setup.py install --user Detectron ä¸‹è½½ä»£ç ä»“åº“ï¼š 12DETECTRON=/path/to/clone/detectron # æŒ‡å®šå®‰è£…è·¯å¾„git clone https://github.com/facebookresearch/detectron $DETECTRON å®‰è£… Python ä¾èµ–ï¼š 1pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r $DETECTRON/requirements.txt ç„¶å make: 1cd $DETECTRON &amp;&amp; make å®‰è£…å®Œæˆåè¿è¡Œæµ‹è¯•ï¼š 1python $DETECTRON/detectron/tests/test_spatial_narrow_as_op.py ç»“æœè¾“å‡º OKï¼Œå®‰è£…å®Œæ¯• è¾“å‡ºä»¥ä¸‹æç¤ºä¿¡æ¯ä¸å¿…ç†ä¼šï¼š 12No handlers could be found for logger "caffe2.python.net_drawer"net_drawer will not run correctly. Please install the correct dependencies. Troubleshooting å‚ç…§ Detectron Troubleshooting Reference https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=prebuilt https://blog.csdn.net/weixin_43624538/article/details/84712617 P.S. CUDA8.0 cuDNN5.1.10 å®‰è£…å¤±è´¥ï¼ŒåŸå› ï¼šPyTorch éœ€è¦ cuDNN&gt;=7.0 æŸ¥çœ‹ CUDA å’Œ cuDNN ç‰ˆæœ¬ï¼š 12345# CUDAcat /usr/local/cuda/version.txt# cuDNNcat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2]]></content>
      <categories>
        <category>å®‰è£…</category>
      </categories>
      <tags>
        <tag>detectron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[YOLOv3 å®‰è£…æ­¥éª¤]]></title>
    <url>%2F2019%2F01%2F15%2FYOLOv3-installation%2F</url>
    <content type="text"><![CDATA[æ“ä½œç³»ç»Ÿï¼šLinux 16.04 ä¾èµ–ï¼š CUDA OpenCV darknet å†™åœ¨å‰é¢ï¼šconda æ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„ python ç¯å¢ƒç®¡ç†å·¥å…·ï¼Œå»ºè®®å®‰è£… Anaconda æˆ– Minicondaã€‚å®‰è£…åŠä½¿ç”¨è¯·å‚é˜…ç½‘ä¸Šæ•™ç¨‹ï¼Œå®‰è£…å®Œæˆåè®°å¾—æ·»åŠ æ¸…åå¤§å­¦ tuna é•œåƒã€‚ Anaconda é•œåƒä½¿ç”¨å¸®åŠ© CUDA æŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹æˆ–è‹±ä¼Ÿè¾¾å®˜æ–¹ç½‘ç«™æ­£ç¡®å®‰è£… CUDA å’Œ cuDNNï¼ˆå®éªŒå®¤æœåŠ¡å™¨ä¸Šçš„ç‰ˆæœ¬æ˜¯ cuda9.0 cudnn7.1ï¼‰ OpenCv å¦‚æœå®‰è£…äº† condaï¼Œé¦–å…ˆè¿›å…¥ä½ æƒ³è¦å®‰è£… YOLO çš„è™šæ‹Ÿç¯å¢ƒã€‚ç¬¬ä¸€æ¬¡ä½¿ç”¨ Anaconda è¯·å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚ 1conda create --name YOURNAME python=3.6 numpy pandas matplotlib ï¼ˆYOURNAME æ›¿æ¢ä¸ºä½ æƒ³è¦çš„åå­—ï¼‰ä¸Šè¿°å‘½ä»¤å°†åˆ›å»ºæ–°çš„ python è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶å®‰è£…å¸¸ç”¨å·¥å…·åŒ… numpy, pandas, matplotlibï¼Œåˆ›å»ºå®Œæˆåè¿›å…¥è™šæ‹Ÿç¯å¢ƒ 12source activate YOURNAMEsource deactivate # use this one to exit è¿›å…¥ç¯å¢ƒåå¼€å§‹å®‰è£… OpenCV 1conda install opencv å®‰è£…å®Œæ¯•å³å¯ darknet é¦–å…ˆä¸‹è½½ github ä»“åº“ 12git clone https://github.com/AlexeyAB/darknet.gitcd darknet ç„¶åæ‰“å¼€ Makefile æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é€‰é¡¹ï¼š 123GPU = 1CUDNN = 1OPENCV = 1 ç„¶ååœ¨ darknet ç›®å½•ä¸‹æ‰§è¡Œ 1make å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼ŒYOLOv3 å°±å®‰è£…æˆåŠŸäº†ã€‚æµ‹è¯•ä¸€ä¸‹ 1./darknet å¯ä»¥çœ‹åˆ°è¾“å‡ºä¸ºï¼š 1usage: ./darknet &lt;function&gt; Reference https://github.com/AlexeyAB/darknet https://pjreddie.com/darknet/yolo/ ğŸ¦„]]></content>
      <categories>
        <category>å®‰è£…</category>
      </categories>
      <tags>
        <tag>yolo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PANet å®‰è£…æ­¥éª¤]]></title>
    <url>%2F2019%2F01%2F15%2FPANet-installation%2F</url>
    <content type="text"><![CDATA[Requirements æ“ä½œç³»ç»Ÿï¼šLinux 16.04 å¹³å°ï¼šPyTorch ä¾èµ– pytorch = 0.4.0 torchvision &gt;= 0.2.0 cython matplotlib numpy scipy opencv pyyaml packaging pycocotools â€“ for coco dataset tensorboardX â€“ for logging in TensorBoard PyTorch ä½¿ç”¨ conda å®‰è£… PyTorch æ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆè¿›å…¥ conda ç¯å¢ƒï¼Œç„¶åæ‰§è¡Œ 1conda install pytorch=0.4.0 torchvision cuda90 -c pytorch å…¶ä½™ cython ç­‰åŒ…éƒ½å¯ä»¥ä½¿ç”¨ conda install æˆ–è€… pip install å‘½ä»¤æ¥å®‰è£…ï¼Œå°±ä¸å†é‡å¤äº† ç¼–è¯‘ PANet é¦–å…ˆä¸‹è½½ github ä»“åº“ï¼š 12git clone https://github.com/ShuLiu1993/PANet.gitcd PANet ç„¶åç¼–è¯‘ 12cd lib # please change to this directorysh make.sh ç­‰å¾…ç¼–è¯‘å®Œæˆå³å¯ã€‚è®­ç»ƒä»£ç åœ¨ PANet/tools æ–‡ä»¶å¤¹ä¸‹ã€‚ å¦‚æœå®‰è£…è¿‡ç¨‹æŠ¥é”™æ‰¾ä¸åˆ° cuda_runtime.hï¼Œå¯ä»¥æŸ¥çœ‹è¿™é‡Œ Reference https://github.com/ShuLiu1993/PANet https://github.com/roytseng-tw/Detectron.pytorch]]></content>
      <categories>
        <category>å®‰è£…</category>
      </categories>
      <tags>
        <tag>panet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŸ¥æ‰¾å›æ–‡å­—ç¬¦ä¸²ï¼šé©¬æ‹‰è½¦ç®—æ³• Manacher's Algorithm]]></title>
    <url>%2F2018%2F12%2F20%2FManacher-Algorithm%2F</url>
    <content type="text"><![CDATA[åœ¨ LeetCode çœ‹åˆ°ä¸€ä¸ªé¢˜ï¼Œç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›æœ€å¤§é•¿åº¦çš„å›æ–‡å­å­—ç¬¦ä¸²ã€‚ Example: 12Input: "babad"Output: "bab" or "aba" æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æš´åŠ›å¾ªç¯éå†ï¼Œä½†æ˜¯ç®—æ³•å¤æ‚åº¦ä¸º $O(n^3)$, å› æ­¤è®°å½•ä¸€ä¸ªçº¿æ€§å¤æ‚åº¦çš„ç®—æ³•â€”â€”é©¬æ‹‰è½¦ç®—æ³•ã€‚ LeetCodeï¼šhttps://leetcode.com/problems/longest-palindromic-substring è‹±æ–‡è§£é‡Šï¼šhttps://articles.leetcode.com/longest-palindromic-substring-part-ii ä¸­æ–‡è§£é‡Šï¼šhttps://www.felix021.com/blog/read.php?2040 Manacherâ€™s Algorithm é¦–å…ˆï¼Œå‡è®¾è¾“å…¥å­—ç¬¦ä¸²ä¸º abaabaï¼Œæ˜¾ç„¶è¾“å…¥å³ä¸ºæœ€é•¿çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œå› æ­¤è¾“å‡ºåº”ä¸º abaabaã€‚è®©æˆ‘ä»¬åˆ†ä¸¤æ­¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 1. é¢„å¤„ç† æˆ‘ä»¬æƒ³ä¸€ä¸‹å¯èƒ½ä¼šå‘ç°ï¼Œå›æ–‡å­—ç¬¦ä¸²åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šå¥‡æ•°é•¿åº¦å’Œå¶æ•°é•¿åº¦ã€‚è¿™ä¸¤ç§æƒ…å†µæ˜¾ç„¶æ˜¯æ— æ³•ç›´æ¥åˆå¹¶å¤„ç†çš„ï¼Œå› æ­¤é©¬æ‹‰è½¦ç®—æ³•é¦–å…ˆå¯¹è¾“å…¥çš„å­—ç¬¦ä¸²è¿›è¡Œäº†ä¸€ä¸‹å¤„ç†ï¼šåœ¨æ¯ä¸ªå­—ç¬¦çš„ä¸¤ä¾§æ’å…¥ä¸€ä¸ªç‰¹å®šå­—ç¬¦ #ï¼Œä¾‹å¦‚ï¼š 12S = &apos;abaaba&apos;T = &apos;#a#b#a#a#b#a#&apos; è¿™æ ·åšçš„å¥½å¤„æ˜¯æ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½å˜æˆäº†å¥‡æ•°é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦åˆ†åˆ«è€ƒè™‘äº† é¢„å¤„ç†éƒ¨åˆ†çš„ä»£ç å¦‚ä¸‹ï¼š 123456def preProcess(self, s): l = [c for c in s] ret = '#'.join(l) # add ^ and $ at both bounds to avoid out of index problem return '^#'+ret+'#$' 2. ç®—æ³•éƒ¨åˆ† ç®—æ³•çš„æ€æƒ³æ˜¯è¿™æ ·çš„ï¼Œå¯¹äºä¸€ä¸ªé¢„å¤„ç†ä¹‹åçš„å­—ç¬¦ä¸² Tï¼Œå®šä¹‰ä¸€ä¸ªå…·æœ‰ç›¸åŒé•¿åº¦çš„æ•°ç»„ Pï¼Œä½¿å¾— P[i] ç­‰äºä»¥ T[i] ä¸ºä¸­å¿ƒçš„ T ä¸­æœ€é•¿å›æ–‡å­—ç¬¦ä¸²çš„åŠå¾„ï¼Œå¯¹äºä¸Šé¢çš„ä¾‹å­ 12T = # a # b # a # a # b # a #P = 0 1 0 3 0 1 6 1 0 3 0 1 0 æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒP å…·æœ‰æŸç§å¯¹ç§°æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°æˆ‘ä»¬çš„è®¡ç®—å¤æ‚åº¦ã€‚é‚£ä¹ˆæ‰€æœ‰çš„æƒ…å†µéƒ½æ˜¯å¯¹ç§°çš„å—ï¼Ÿå¯æƒœçš„æ˜¯å¹¶ä¸æ˜¯ï¼Œåªæœ‰åœ¨æŸç§ç‰¹å®šçš„æ¡ä»¶ä¸‹è¿™ç§æƒ…å†µæ‰æˆç«‹ã€‚ä½†æ˜¯æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ä¸€æ ·å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨å‡å°‘è®¡ç®—ï¼Œåªæ˜¯éœ€è¦æ‰¾åˆ°ä¸æ»¡è¶³è¿™ç§æƒ…å†µçš„æ¡ä»¶å°±å¯ä»¥äº† æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ï¼ŒS = â€˜babcbabcbaccbaâ€™ ä¸Šå›¾ä¸­å‡è®¾å½“å‰ i ä¸º 13ï¼Œ å®çº¿è¡¨ç¤ºå›æ–‡å­—ç¬¦ä¸² abcbabcbaçš„ä¸­å¿ƒï¼Œè™šçº¿è¡¨ç¤ºä¸¤ä¾§çš„è¾¹ç•Œã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”±äºå›æ–‡å­—ç¬¦ä¸²çš„å¯¹ç§°æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„çŸ¥é“ P[13] çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ç­‰äº P[9] å¤„çš„å€¼ã€‚ç„¶åç»§ç»­çœ‹ ç°åœ¨æˆ‘ä»¬åˆ°äº†ä¸‹æ ‡ä¸º 15 çš„ä½ç½®ï¼Œp[15] çš„å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬ç»§ç»­æ ¹æ®å¯¹ç§°æ€§è´¨ï¼Œé‚£ä¹ˆå°±ä¼šå¾—åˆ° P[15] = P[7] = 7ï¼Œä½†å¾ˆæ˜¾ç„¶æ˜¯é”™è¯¯çš„ã€‚ å¦‚æœä»¥ T[15] ä¸ºä¸­å¿ƒï¼Œæˆ‘ä»¬å¾—åˆ°çš„å›æ–‡å­—ç¬¦ä¸²ä¸º #a#b#c#b#a#ï¼Œè€Œ T[7] å¤„çš„å›æ–‡å­—ç¬¦ä¸²è¦æ›´é•¿ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å½“å‰çš„ä»¥ C ä¸ºä¸­å¿ƒçš„å›æ–‡å­—ç¬¦ä¸²å¹¶ä¸èƒ½å®Œå…¨åŒ…å«ä»¥ T[7] ä¸ºä¸­å¿ƒçš„å›æ–‡å­—ç¬¦ä¸²ï¼Œå› æ­¤å°±é€ æˆäº†ä¸æ»¡è¶³å¯¹ç§°æ€§è´¨çš„æƒ…å†µã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦å– P[i] = min(P[i'], R-i) å°±å¯ä»¥äº†ã€‚ ç”¨ä¼ªä»£ç æ€»ç»“ä¸€ä¸‹ï¼š 123if P[i&apos;] &lt;= R - ithen P[i] = P[i&apos;]else P[i] &lt;= P[i&apos;] ç„¶åæˆ‘ä»¬éœ€è¦ç¡®å®š R å’Œ C çš„æ›´æ–°ç­–ç•¥ï¼šå¦‚æœä»¥ i ä¸ºä¸­å¿ƒçš„å›æ–‡å­—ç¬¦ä¸²çš„è¶…è¿‡äº† Rï¼Œåˆ™ä»¤æ–°çš„ä¸­å¿ƒC = iï¼Œç„¶åæŠŠ R æ‰©å±•åˆ°æ–°çš„å›æ–‡å­—ç¬¦ä¸²çš„å³è¾¹ç•Œã€‚ å…¨éƒ¨ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243class Solution: def longestPalindrome(self, s): """ :type s: str :rtype: str """ # Manacher's algorithm T = self.preProcess(s) length = len(T) C, R = 0, 0 P = [0] * length i = 1 while i &lt; length-1: # i_mirror can reduce the computation of P[i] i_mirror = 2*C - i # equals to C - (i - C) P[i] = min(P[i_mirror], R-i) if R &gt; i else 0 # expand the palindrome centered at i while T[i + P[i] + 1] == T[i - P[i] - 1]: P[i] += 1 # adjust center if the expanded palindrome pasts R if R &lt; i + P[i]: C = i R = i + P[i] i += 1 maxLength = max(P) centerIndex = P.index(maxLength) start = (centerIndex - maxLength) // 2 stop = start + maxLength return s[start:stop] def preProcess(self, s): l = [c for c in s] ret = '#'.join(l) # add ^ and $ at both bounds to avoid out of index problem return '^#'+ret+'#$' æœ€å æŒ‰ç†è¯´çº¿æ€§å¤æ‚åº¦çš„ç®—æ³•å·²ç»æ˜¯å¾ˆå¿«äº†ï¼Œå½“ç„¶ LeetCode ä¸Šè¿˜æœ‰å¾ˆå¤šå¤§ç¥çš„ç¥ä»™ä»£ç æ›´å¿«ï¼Œåæ­£æˆ‘æ˜¯çœ‹ä¸æ‡‚â€¦â€¦ ğŸ™‚ å®Œ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PyTorch è°ƒç”¨ GPU æŠ¥ CUDA unknown error]]></title>
    <url>%2F2018%2F12%2F18%2Fpytorch-cuda-unknown-error%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸ºäº†è·‘ PANetï¼Œåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº† Detectron.pytorchï¼Œå®‰è£…è¿‡ç¨‹è¿˜æŒºé¡ºåˆ©ï¼Œä½†æ˜¯åªè¦è°ƒç”¨ GPU è¿ç®—å°±æŠ¥æœªçŸ¥é”™è¯¯ï¼Œç½‘ä¸Šæœç´¢ä¸€ç•ªå‘ç°å¯èƒ½æ˜¯æ˜¾å¡é©±åŠ¨å®‰è£…æœ‰é—®é¢˜ï¼Œå¯¼è‡´ Torch è°ƒç”¨æ˜¾å¡æ—¶æ— æ³•æ­£å¸¸åˆå§‹åŒ–ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹ç½‘ä¸Šçš„è§£å†³æ–¹æ³•ã€‚ æŠ¥é”™ä¿¡æ¯ 1RuntimeError: cuda runtime error (30) : unknown error at /opt/conda/conda-bld/pytorch_1524586445097/work/aten/src/THC/THCTensorRandom.cu:25 æ–¹æ³•1ï¼šé‡æ–°å®‰è£…æ˜¾å¡é©±åŠ¨å’Œ CUDA æ—¢ç„¶æ˜¯é©±åŠ¨é—®é¢˜ï¼Œé‚£ä¹ˆè‡ªç„¶åœ°é‡æ–°å®‰è£…ä¸€ä¸‹æœ€æ–°ç‰ˆçš„æ˜¾å¡é©±åŠ¨åº”è¯¥å°±æ²¡é—®é¢˜äº†ï¼Œæ³¨æ„é©±åŠ¨å®‰è£…å®Œæˆä¹‹åæœ€å¥½è¦é‡å¯ä¸€ä¸‹æœºå™¨ã€‚å®‰è£…å®Œé©±åŠ¨ä¹‹åä½¿ç”¨ conda é‡æ–°å®‰è£… PyTorchã€‚ä½†æ˜¯ç”±äºæœåŠ¡å™¨æ˜¯å…¬ç”¨èµ„æºï¼Œä¸ºäº†ä¸å½±å“åŒå­¦ä½¿ç”¨ï¼Œåªå¾—ä½¿ç”¨æƒå®œä¹‹è®¡ã€‚ æ–¹æ³•2ï¼šroot æƒé™è¿è¡Œ python ç½‘ä¸Šçš„è§£å†³æ–¹æ³•é™¤äº†é‡è£…é©±åŠ¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æš‚æ—¶çš„è§£å†³åŠæ³•ã€‚å› ä¸ºæ­£ç¡®å®‰è£…æ˜¾å¡é©±åŠ¨ä¼šä¿è¯ Torch è°ƒç”¨æ˜¾å¡æ—¶è‡ªåŠ¨è¿›è¡Œæ­£å¸¸çš„åˆå§‹åŒ–ï¼Œé‚£æˆ‘ä¹Ÿå¯ä»¥æ‰‹åŠ¨èµ‹äºˆ python root æƒé™å»åˆå§‹åŒ–æ˜¾å¡ã€‚ åœ¨å°è¯•çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œç”±äºæœåŠ¡å™¨ç¯å¢ƒæ¯”è¾ƒæ··ä¹±ï¼Œsudo æå‡æƒé™ä¹‹åè¿è¡Œçš„ä¸æ˜¯æˆ‘è‡ªå·±çš„ pythonï¼Œè€Œä¸” PYTHONPATH å’Œ ä¸€äº›ç¯å¢ƒå˜é‡ä¹Ÿä¸å¯¹ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š é¦–å…ˆåœ¨ python ä»£ç ä¸­åŠ ä¸Š 12345import osimport syssys.path.append('/path/to/cocoapi/PythonAPI') # my code needs pycocotoolsos.environ["CUDA_DEVICE_ORDER"]="PCI_BUS_ID" # optionalos.environ["CUDA_VISIBLE_DEVICES"]="0" ç„¶ååœ¨è¿è¡Œ 1sudo /path/to/your/python tools/train_net_step.py --dataset dota --cfg xx.yml --use_tfboard ç„¶åå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº† å®Œ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>cuda</tag>
        <tag>error</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¼–è¯‘æ—¶é‡åˆ° /tmp æ–‡ä»¶å¤¹ç©ºé—´ä¸è¶³çš„è§£å†³åŠæ³•]]></title>
    <url>%2F2018%2F12%2F11%2FNo-Space-in-tmp%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨æœåŠ¡å™¨ä¸Šç¼–è¯‘ PyTorch æ—¶é‡åˆ°äº† /tmp æ–‡ä»¶å¤¹ç©ºé—´ä¸è¶³çš„é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´å®‰è£… Ubuntu æ—¶ç»™ / æŒ‚è½½ç‚¹åˆ†é…è¶³å¤Ÿçš„ç¡¬ç›˜ç©ºé—´å°±ä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æœåŠ¡å™¨æœ‰å¾ˆå¤šäººç”¨ï¼Œæ–‡ä»¶æ¯”è¾ƒæ··ä¹±ï¼Œ/æŒ‚è½½ç‚¹å·²ç»è¾¾åˆ°äº† 100% çš„ç©ºé—´ä½¿ç”¨ç‡ï¼Œå› æ­¤ç™¾åº¦åˆ°äº†ä¸€ä¸ªè§£å†³åŠæ³• å…¶å®è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æœ‰ç¡¬ç›˜ç©ºé—´çš„æŒ‚è½½ç‚¹ä¸‹ï¼ˆä¾‹å¦‚ /home ï¼‰æ–°å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ä¾›ç¼–è¯‘æ—¶ä¸´æ—¶ä½¿ç”¨å°±å¯ä»¥äº† æ–°å»ºæ–‡ä»¶å¤¹ åœ¨ç”¨æˆ·ç›®å½•ä¸‹æ–°å»ºä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶ä½¿ä¹‹ç”Ÿæ•ˆå³å¯ 123cd /home/lxymkdir tmpexport TMPDIR = /home/lxy/tmp è¿™æ ·é‡æ–°æ‰§è¡Œç¼–è¯‘å‘½ä»¤å°±å¯ä»¥é¡ºåˆ©ç¼–è¯‘äº† è¿˜å¯ä»¥å°†æœ€åä¸€å¥ä»£ç å†™è¿› .bashrc æ–‡ä»¶ï¼Œç„¶å source ä¸€ä¸‹ï¼Œä»¥åä¸´æ—¶æ–‡ä»¶éƒ½ä¼šå­˜æ”¾åœ¨è¯¥ä¸´æ—¶æ–‡ä»¶å¤¹ å®Œ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°† DOTA æ•°æ®é›†çš„æ ‡æ³¨è½¬æ¢ä¸º COCO æ ¼å¼]]></title>
    <url>%2F2018%2F12%2F10%2FConvert-dataset-to-coco-like%2F</url>
    <content type="text"><![CDATA[DOTA æ•°æ®é›†ï¼šhttp://captain.whu.edu.cn/DOTAweb/index.html COCO æ•°æ®é›†ï¼šhttp://cocodataset.org/#download COCO APIï¼šhttps://github.com/cocodataset/cocoapi API make æŠ¥é”™ï¼Œå®‰è£… Cython å³å¯ 1conda install cython COCO æ•°æ®é›†ç®€ä»‹ COCO æ•°æ®é›†åŒ…å« instanceï¼Œkeypoint å’Œ caption ç­‰éƒ¨åˆ†ï¼Œæœ¬æ–‡åªä»‹ç» instance ç›¸å…³å†…å®¹ COCO æ•°æ®é›†çš„ç»„ç»‡æ–¹å¼ coco â”œâ”€â”€ annos.txt (optional) â”œâ”€â”€ annotations â”œâ”€â”€ classes.txt (optional) â””â”€â”€ images annotations æ–‡ä»¶å¤¹æ”¾æ•°æ®é›†çš„æ ‡æ³¨æ–‡ä»¶ï¼ˆjsonæ ¼å¼ï¼‰ï¼Œimages æ–‡ä»¶å¤¹æ”¾æ•°æ®é›†çš„æ‰€æœ‰å›¾ç‰‡ï¼Œï¼ˆannos.txt æ”¾æ•°æ®é›†çš„åŸå§‹æ ‡æ³¨æ–‡ä»¶ï¼Œclass.txt æ”¾æ ‡æ³¨çš„ç±»åˆ«åç§°ï¼Œæ¯è¡Œä¸€ä¸ªç±»åˆ«ï¼Œä¸å«èƒŒæ™¯ï¼‰ COCO çš„æ•°æ®æ ‡æ³¨æ ¼å¼ COCO æ•°æ®é›†ä»¥ json æ–‡ä»¶æ ¼å¼å­˜å‚¨æ•°æ®é›†çš„æ ‡æ³¨ä¿¡æ¯ï¼Œæ ‡æ³¨çš„æ ¼å¼å¯ä»¥å‚è€ƒ å®˜ç½‘ å’Œè¿™ä¸ª çŸ¥ä¹ä¸“æ ï¼Œåœ¨è¿™é‡Œå°±ä¸é‡å¤äº†ã€‚ ç¡®å®šäº†æ ‡æ³¨çš„æ ¼å¼ä»¥åï¼Œåˆ†æ DOTA æ•°æ®é›†çš„æ ‡æ³¨æ ¼å¼ï¼Œå¯ä»¥æå–å…¶ä¸­çš„ä¿¡æ¯ç„¶åä»¥ json æ ¼å¼å­˜å‚¨ä¸‹æ¥å°±å¯ä»¥äº† æ ¼å¼è½¬æ¢è„šæœ¬ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556import jsonimport dota_utils as utilimport osfrom PIL import Imageinfo = &#123;"description": "DOTA dataset from WHU", "url": "http://caption.whu.edu.cn", "year": 2018, "version": "1.0"&#125;licenses = &#123;"url": "http://creativecommons.org/licenses/by-nc/2.0/", "id": 1, "name": "Attribution-NonCommercial License"&#125;categories = []for i, catName in enumerate(util.wordname_15, start=1): categories.append(&#123;"id": i, "name": "%s" % catName, "supercategory": "%s" % catName&#125;)images = []annotations = []aug = "/home/lxy/dota/data/aug"augmented = "/home/lxy/dota/data/augmented"train_small = "/home/lxy/dota/data/train_small"trainsplit_HBB = "/home/lxy/dota/data/trainsplit_HBB"val_small = "/home/lxy/dota/data/val_small"valsplit_HBB = "/home/lxy/dota/data/valsplit_HBB"dataset_path = [augmented, train_small, trainsplit_HBB, val_small, valsplit_HBB]imgid = 0annid = 0for path in dataset_path: img_path = os.path.join(path, "images") label_path = os.path.join(path, "labelTxt") for file in os.listdir(label_path): img_name = file.replace("txt", "png") im = Image.open(os.path.join(img_path, img_name)) w, h = im.size imgid += 1 images.append(&#123;"license": 1, "file_name": "%s" % img_name, \ "height": h, "width": w, "id": imgid&#125;) f = open(os.path.join(label_path, file)) for line in f.readlines(): line = "".join(line).strip("\n").split(" ") # a bbox has 4 points, a category name and a difficulty if len(line) != 10: print(path, file) else: annid += 1 catid = util.wordname_15.index(line[-2]) + 1 w_bbox = int(line[4][:-2]) - int(line[0][:-2]) h_bbox = int(line[5][:-2]) - int(line[1][:-2]) bbox = [line[0], line[1], str(w_bbox)+'.0', str(h_bbox)+'.0'] annotations.append(&#123;"id": annid, "image_id": imgid, "category_id": catid, \ "segmentation": [line[0:8]], "area": float(w_bbox*h_bbox), \ "bbox": bbox, "iscrowd": 0&#125;) f.close()my_json = &#123;"info": info, "licenses": licenses, "images": images, "annotations": annotations, "categories": categories&#125;with open("/home/lxy/dota/data/coco/annotations/train.json", "w+") as f: json.dump(my_json, f) print("writing json file done!") æ£€æŸ¥è½¬æ¢ç»“æœ è¿™é‡Œéœ€è¦ç”¨åˆ° COCO APIï¼Œå…·ä½“ç”¨æ³•å‚è€ƒ repo é‡Œçš„ demo æ–‡ä»¶ï¼Œè¯»å–è½¬æ¢å®Œæˆçš„æ•°æ®é›†å¹¶æ˜¾ç¤ºæ ‡æ³¨ç»“æœï¼Œè§‚å¯Ÿæ ‡æ³¨æ˜¯å¦æœ‰è¯¯ å®Œ]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æ•°æ®é›†</tag>
        <tag>COCO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NP-Hardé—®é¢˜]]></title>
    <url>%2F2018%2F12%2F07%2FNP-Hard%2F</url>
    <content type="text"><![CDATA[ç®€å•ç†è§£ NP, P, NP-Complete å’Œ NP-Hard å‚è€ƒï¼šhttps://www.cnblogs.com/sancyun/p/4250360.html P æ˜¯ä¸€ç±»å¯ä»¥é€šè¿‡ç¡®å®šæ€§å›¾çµæœºï¼ˆä»¥ä¸‹ç®€ç§° å›¾çµæœºï¼‰åœ¨å¤šé¡¹å¼æ—¶é—´ (Polynomial time) å†…è§£å†³çš„é—®é¢˜é›†åˆã€‚ NP æ˜¯ä¸€ç±»å¯ä»¥é€šè¿‡éç¡®å®šæ€§å›¾çµæœº ( Non-deterministic Turing Machine) åœ¨å¤šé¡¹å¼æ—¶é—´ (Polynomial time) å†…è§£å†³çš„å†³ç­–é—®é¢˜é›†åˆã€‚ P æ˜¯ NP çš„å­é›†ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•å¯ä»¥è¢«å›¾çµæœºåœ¨å¤šé¡¹å¼æ—¶é—´å†…è§£å†³çš„é—®é¢˜éƒ½å¯ä»¥è¢«éç¡®å®šæ€§çš„å›¾çµæœºè§£å†³ã€‚ æ¥ä¸‹æ¥è¯´è¯´ NP é‡Œæœ€éš¾å¾—é—®é¢˜ NP-Completeã€‚ å…¶å®šä¹‰å¦‚ä¸‹ï¼Œ å¦‚æœä¸€ä¸ªå†³ç­–é—®é¢˜ L æ˜¯ NP-Complete çš„ï¼Œé‚£ä¹ˆ L å…·å¤‡ä»¥ä¸‹ä¸¤ä¸ªæ€§è´¨ï¼š L æ˜¯ NPï¼ˆç»™å®šä¸€ä¸ªè§£å†³ NP-Complete çš„æ–¹æ¡ˆ (solutionï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æ€è€ƒä¸€ä¸‹ solution å’Œ answer çš„åŒºåˆ«)ï¼Œå¯ä»¥å¾ˆå¿«éªŒè¯æ˜¯å¦å¯è¡Œï¼Œä½†ä¸å­˜åœ¨å·²çŸ¥é«˜æ•ˆçš„æ–¹æ¡ˆ ã€‚ï¼‰ NP é‡Œçš„ä»»ä½•é—®é¢˜å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…è½¬ä¸º Lã€‚ è€Œ NP-Hard åªéœ€è¦å…·å¤‡ NP-Complete çš„ç¬¬äºŒä¸ªæ€§è´¨ï¼Œå› æ­¤ NP-Complete æ˜¯ NP-Hard çš„å­é›†ã€‚ è¿™å››è€…çš„å…³ç³»å¦‚ä¸‹å›¾ï¼ˆå‡è®¾ P!= NPï¼‰ï¼š]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>NP-Hard</tag>
      </tags>
  </entry>
</search>
